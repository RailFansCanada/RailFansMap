(()=>{var e,t,n,r,a,i={8617:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"images/0d2bc5dd1431b65d907de926bf0b0097-label.png"},4559:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"images/d3f95968fdd836be72f8024bcc65194b-logoDark.svg"},380:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n.p+"images/8a3f225facad69ea0aafb53ddb6968ce-logoLight.svg"},5767:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r="CREATE VIRTUAL TABLE stations_search USING fts5 (\n    name,\n    description,\n    parent,\n    terms,\n    lines,\n    lng,\n    lat\n);\nCREATE VIRTUAL TABLE bounds_search USING fts5 (\n    name,\n    description,\n    terms,\n    id,\n    type,\n    bounds\n);"},3472:(e,t,n)=>{e=n.nmd(e);var r=void 0,a=function(t){return r||(r=new Promise((function(r,a){var i,o=void 0!==t?t:{},l=o.onAbort;o.onAbort=function(e){a(new Error(e)),l&&l(e)},o.postRun=o.postRun||[],o.postRun.push((function(){r(o)})),e=void 0,i||(i=void 0!==o?o:{}),i.onRuntimeInitialized=function(){function e(e,t){this.Qa=e,this.db=t,this.Oa=1,this.kb=[]}function t(e,t){if(this.db=t,t=U(e)+1,this.cb=Lt(t),null===this.cb)throw Error("Unable to allocate memory for the SQL string");W(e,q,this.cb,t),this.ib=this.cb,this.Za=this.ob=null}function n(e){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=e){var t=this.filename,n=t?fe("//"+t):"/";if(n=Ge(n,4095&(void 0!==(t=ct(!0,!0))?t:438)|32768,0),e){if("string"==typeof e){for(var a=Array(e.length),i=0,l=e.length;i<l;++i)a[i]=e.charCodeAt(i);e=a}tt(n,146|t),st(a=at(n,577),e,0,e.length,0,void 0),it(a),tt(n,t)}}this.handleError(o(this.filename,r)),this.db=M(r,"i32"),re(this.db),this.eb={},this.Wa={}}var r=It(4),a=i.cwrap,o=a("sqlite3_open","number",["string","number"]),l=a("sqlite3_close_v2","number",["number"]),s=a("sqlite3_exec","number",["number","string","number","number","number"]),u=a("sqlite3_changes","number",["number"]),c=a("sqlite3_prepare_v2","number",["number","string","number","number","number"]),f=a("sqlite3_sql","string",["number"]),d=a("sqlite3_normalized_sql","string",["number"]),p=a("sqlite3_prepare_v2","number",["number","number","number","number","number"]),m=a("sqlite3_bind_text","number",["number","number","number","number","number"]),h=a("sqlite3_bind_blob","number",["number","number","number","number","number"]),b=a("sqlite3_bind_double","number",["number","number","number"]),g=a("sqlite3_bind_int","number",["number","number","number"]),y=a("sqlite3_bind_parameter_index","number",["number","string"]),v=a("sqlite3_step","number",["number"]),w=a("sqlite3_errmsg","string",["number"]),_=a("sqlite3_column_count","number",["number"]),x=a("sqlite3_data_count","number",["number"]),j=a("sqlite3_column_double","number",["number","number"]),L=a("sqlite3_column_text","string",["number","number"]),P=a("sqlite3_column_blob","number",["number","number"]),T=a("sqlite3_column_bytes","number",["number","number"]),C=a("sqlite3_column_type","number",["number","number"]),A=a("sqlite3_column_name","string",["number","number"]),I=a("sqlite3_reset","number",["number"]),R=a("sqlite3_clear_bindings","number",["number"]),$=a("sqlite3_finalize","number",["number"]),z=a("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Q=a("sqlite3_value_type","number",["number"]),K=a("sqlite3_value_bytes","number",["number"]),H=a("sqlite3_value_text","string",["number"]),Y=a("sqlite3_value_blob","number",["number"]),V=a("sqlite3_value_double","number",["number"]),Z=a("sqlite3_result_double","",["number","number"]),J=a("sqlite3_result_null","",["number"]),X=a("sqlite3_result_text","",["number","string","number","number"]),ee=a("sqlite3_result_blob","",["number","number","number","number"]),te=a("sqlite3_result_int","",["number","number"]),ne=a("sqlite3_result_error","",["number","string","number"]),re=a("RegisterExtensionFunctions","number",["number"]);e.prototype.bind=function(e){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(e)?this.Cb(e):null==e||"object"!=typeof e||this.Db(e)},e.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var e=v(this.Qa);switch(e){case 100:return!0;case 101:return!1;default:throw this.db.handleError(e)}},e.prototype.yb=function(e){return null==e&&(e=this.Oa,this.Oa+=1),j(this.Qa,e)},e.prototype.Gb=function(e){if(null==e&&(e=this.Oa,this.Oa+=1),e=L(this.Qa,e),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(e)},e.prototype.Hb=function(e){return null==e&&(e=this.Oa,this.Oa+=1),L(this.Qa,e)},e.prototype.getBlob=function(e){null==e&&(e=this.Oa,this.Oa+=1);var t=T(this.Qa,e);e=P(this.Qa,e);for(var n=new Uint8Array(t),r=0;r<t;r+=1)n[r]=F[e+r];return n},e.prototype.get=function(e,t){t=t||{},null!=e&&this.bind(e)&&this.step(),e=[];for(var n=x(this.Qa),r=0;r<n;r+=1)switch(C(this.Qa,r)){case 1:var a=t.useBigInt?this.Gb(r):this.yb(r);e.push(a);break;case 2:e.push(this.yb(r));break;case 3:e.push(this.Hb(r));break;case 4:e.push(this.getBlob(r));break;default:e.push(null)}return e},e.prototype.getColumnNames=function(){for(var e=[],t=_(this.Qa),n=0;n<t;n+=1)e.push(A(this.Qa,n));return e},e.prototype.getAsObject=function(e,t){e=this.get(e,t),t=this.getColumnNames();for(var n={},r=0;r<t.length;r+=1)n[t[r]]=e[r];return n},e.prototype.getSQL=function(){return f(this.Qa)},e.prototype.getNormalizedSQL=function(){return d(this.Qa)},e.prototype.run=function(e){return null!=e&&this.bind(e),this.step(),this.reset()},e.prototype.tb=function(e,t){null==t&&(t=this.Oa,this.Oa+=1);var n=D(e=Ot(e));this.kb.push(n),this.db.handleError(m(this.Qa,t,n,e.length-1,0))},e.prototype.Bb=function(e,t){null==t&&(t=this.Oa,this.Oa+=1);var n=D(e);this.kb.push(n),this.db.handleError(h(this.Qa,t,n,e.length,0))},e.prototype.sb=function(e,t){null==t&&(t=this.Oa,this.Oa+=1),this.db.handleError((e===(0|e)?g:b)(this.Qa,t,e))},e.prototype.Eb=function(e){null==e&&(e=this.Oa,this.Oa+=1),h(this.Qa,e,0,0,0)},e.prototype.ub=function(e,t){switch(null==t&&(t=this.Oa,this.Oa+=1),typeof e){case"string":return void this.tb(e,t);case"number":return void this.sb(e,t);case"bigint":return void this.tb(e.toString(),t);case"boolean":return void this.sb(e+0,t);case"object":if(null===e)return void this.Eb(t);if(null!=e.length)return void this.Bb(e,t)}throw"Wrong API use : tried to bind a value of an unknown type ("+e+")."},e.prototype.Db=function(e){var t=this;return Object.keys(e).forEach((function(n){var r=y(t.Qa,n);0!==r&&t.ub(e[n],r)})),!0},e.prototype.Cb=function(e){for(var t=0;t<e.length;t+=1)this.ub(e[t],t+1);return!0},e.prototype.reset=function(){return this.freemem(),0===R(this.Qa)&&0===I(this.Qa)},e.prototype.freemem=function(){for(var e;void 0!==(e=this.kb.pop());)Pt(e)},e.prototype.free=function(){this.freemem();var e=0===$(this.Qa);return delete this.db.eb[this.Qa],this.Qa=0,e},t.prototype.next=function(){if(null===this.cb)return{done:!0};if(null!==this.Za&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var t=qt(),n=It(4);O(r),O(n);try{this.db.handleError(p(this.db.db,this.ib,-1,r,n)),this.ib=M(n,"i32");var a=M(r,"i32");return 0===a?(this.mb(),{done:!0}):(this.Za=new e(a,this.db),this.db.eb[a]=this.Za,{value:this.Za,done:!1})}catch(e){throw this.ob=N(this.ib),this.mb(),e}finally{At(t)}},t.prototype.mb=function(){Pt(this.cb),this.cb=null},t.prototype.getRemainingSQL=function(){return null!==this.ob?this.ob:N(this.ib)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(t.prototype[Symbol.iterator]=function(){return this}),n.prototype.run=function(e,t){if(!this.db)throw"Database closed";if(t){e=this.prepare(e,t);try{e.step()}finally{e.free()}}else this.handleError(s(this.db,e,0,0,r));return this},n.prototype.exec=function(t,n,a){if(!this.db)throw"Database closed";var i=qt(),o=null;try{var l=U(t)+1,s=It(l);W(t,F,s,l);var u=s,c=It(4);for(t=[];0!==M(u,"i8");){O(r),O(c),this.handleError(p(this.db,u,-1,r,c));var f=M(r,"i32");if(u=M(c,"i32"),0!==f){for(l=null,o=new e(f,this),null!=n&&o.bind(n);o.step();)null===l&&(l={columns:o.getColumnNames(),values:[]},t.push(l)),l.values.push(o.get(null,a));o.free()}}return t}catch(e){throw o&&o.free(),e}finally{At(i)}},n.prototype.each=function(e,t,n,r,a){"function"==typeof t&&(r=n,n=t,t=void 0),e=this.prepare(e,t);try{for(;e.step();)n(e.getAsObject(null,a))}finally{e.free()}if("function"==typeof r)return r()},n.prototype.prepare=function(t,n){if(O(r),this.handleError(c(this.db,t,-1,r,0)),0===(t=M(r,"i32")))throw"Nothing to prepare";var a=new e(t,this);return null!=n&&a.bind(n),this.eb[t]=a},n.prototype.iterateStatements=function(e){return new t(e,this)},n.prototype.export=function(){Object.values(this.eb).forEach((function(e){e.free()})),Object.values(this.Wa).forEach(S),this.Wa={},this.handleError(l(this.db));var e=function(e){var t={encoding:"binary"};if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw Error('Invalid encoding type "'+t.encoding+'"');var n,r=at(e,t.flags);e=Xe(e).size;var a=new Uint8Array(e);return lt(r,a,0,e,0),"utf8"===t.encoding?n=B(a,0):"binary"===t.encoding&&(n=a),it(r),n}(this.filename);return this.handleError(o(this.filename,r)),this.db=M(r,"i32"),e},n.prototype.close=function(){null!==this.db&&(Object.values(this.eb).forEach((function(e){e.free()})),Object.values(this.Wa).forEach(S),this.Wa={},this.handleError(l(this.db)),Ze("/"+this.filename),this.db=null)},n.prototype.handleError=function(e){if(0===e)return null;throw e=w(this.db),Error(e)},n.prototype.getRowsModified=function(){return u(this.db)},n.prototype.create_function=function(e,t){Object.prototype.hasOwnProperty.call(this.Wa,e)&&(S(this.Wa[e]),delete this.Wa[e]);var n=function(e){if(!E){E=new WeakMap;for(var t=0;t<G.length;t++){var n=G.get(t);n&&E.set(n,t)}}if(E.has(e))e=E.get(e);else{if(k.length)t=k.pop();else{try{G.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}t=G.length-1}try{G.set(t,e)}catch(i){if(!(i instanceof TypeError))throw i;if("function"==typeof WebAssembly.Function){var r={i:"i32",j:"i64",f:"f32",d:"f64"},a={parameters:[],results:[]};for(n=1;4>n;++n)a.parameters.push(r["viii"[n]]);n=new WebAssembly.Function(a,e)}else{for(a={i:127,j:126,f:125,d:124},(r=[1,0,1,96]).push(3),n=0;3>n;++n)r.push(a["iii"[n]]);r.push(0),r[1]=r.length-2,n=new Uint8Array([0,97,115,109,1,0,0,0].concat(r,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),n=new WebAssembly.Module(n),n=new WebAssembly.Instance(n,{e:{f:e}}).exports.f}G.set(t,n)}E.set(e,t),e=t}return e}((function(e,n,r){for(var a,i=[],o=0;o<n;o+=1){var l=M(r+4*o,"i32"),s=Q(l);if(1===s||2===s)l=V(l);else if(3===s)l=H(l);else if(4===s){l=K(s=l),s=Y(s);for(var u=new Uint8Array(l),c=0;c<l;c+=1)u[c]=F[s+c];l=u}else l=null;i.push(l)}try{a=t.apply(null,i)}catch(t){return void ne(e,t,-1)}switch(typeof a){case"boolean":te(e,a?1:0);break;case"number":Z(e,a);break;case"string":X(e,a,-1,-1);break;case"object":null===a?J(e):null!=a.length?(n=D(a),ee(e,n,a.length,-1),Pt(n)):ne(e,"Wrong API use : tried to return a value of an unknown type ("+a+").",-1);break;default:J(e)}}));return this.Wa[e]=n,this.handleError(z(this.db,e,t.length,1,0,n,0,0,0)),this},i.Database=n};var s,u={};for(s in i)i.hasOwnProperty(s)&&(u[s]=i[s]);var c,f,d,p,m,h="./this.program",b="object"==typeof window,g="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v="";y?(v=g?n(8183).dirname(v)+"/":"//",c=function(e,t){return p||(p=n(2219)),m||(m=n(8183)),e=m.normalize(e),p.readFileSync(e,t?null:"utf8")},d=function(e){return(e=c(e,!0)).buffer||(e=new Uint8Array(e)),e.buffer||ie("Assertion failed: undefined"),e},f=function(e,t,r){p||(p=n(2219)),m||(m=n(8183)),e=m.normalize(e),p.readFile(e,(function(e,n){e?r(e):t(n.buffer)}))},1<process.argv.length&&(h=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.exports=i,i.inspect=function(){return"[Emscripten Module object]"}):(b||g)&&(g?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),v=0!==v.indexOf("blob:")?v.substr(0,v.lastIndexOf("/")+1):"",c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},g&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var w=i.print||console.log.bind(console),_=i.printErr||console.warn.bind(console);for(s in u)u.hasOwnProperty(s)&&(i[s]=u[s]);u=null,i.thisProgram&&(h=i.thisProgram);var E,x,k=[];function S(e){E.delete(G.get(e)),k.push(e)}function O(e){var t="i32";switch("*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":F[e>>0]=0;break;case"i16":A[e>>1]=0;break;case"i32":I[e>>2]=0;break;case"i64":ee=[0,(X=0,1<=+Math.abs(X)?0<X?(0|Math.min(+Math.floor(X/4294967296),4294967295))>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)],I[e>>2]=ee[0],I[e+4>>2]=ee[1];break;case"float":R[e>>2]=0;break;case"double":$[e>>3]=0;break;default:ie("invalid type for setValue: "+t)}}function M(e,t){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return F[e>>0];case"i16":return A[e>>1];case"i32":case"i64":return I[e>>2];case"float":return R[e>>2];case"double":return $[e>>3];default:ie("invalid type for getValue: "+t)}return null}i.wasmBinary&&(x=i.wasmBinary),i.noExitRuntime,"object"!=typeof WebAssembly&&ie("no native wasm support detected");var j,L=!1;function P(e){var t=i["_"+e];return t||ie("Assertion failed: Cannot call unknown function "+e+", make sure it is exported"),t}function T(e,t,n,r){var a={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);t=It(n),W(e,q,t,n)}return t},array:function(e){var t=It(e.length);return F.set(e,t),t}};e=P(e);var i,o=[],l=0;if(r)for(var s=0;s<r.length;s++){var u=a[n[s]];u?(0===l&&(l=qt()),o[s]=u(r[s])):o[s]=r[s]}return i=n=e.apply(null,o),0!==l&&At(l),"string"===t?N(i):"boolean"===t?!!i:i}function D(e){var t=Lt(e.length);return e.subarray||e.slice?q.set(e,t):q.set(new Uint8Array(e),t),t}var C,F,q,A,I,R,$,z="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function B(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&z)return z.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var i=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function N(e,t){return e?B(q,e,t):""}function W(e,t,n,r){if(!(0<r))return 0;var a=n;r=n+r-1;for(var i=0;i<e.length;++i){var o=e.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),127>=o){if(n>=r)break;t[n++]=o}else{if(2047>=o){if(n+1>=r)break;t[n++]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;t[n++]=224|o>>12}else{if(n+3>=r)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63}t[n++]=128|o>>6&63}t[n++]=128|63&o}}return t[n]=0,n-a}function U(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),127>=r?++t:t=2047>=r?t+2:65535>=r?t+3:t+4}return t}function Q(e){var t=U(e)+1,n=Lt(t);return n&&W(e,F,n,t),n}function K(){var e=j.buffer;C=e,i.HEAP8=F=new Int8Array(e),i.HEAP16=A=new Int16Array(e),i.HEAP32=I=new Int32Array(e),i.HEAPU8=q=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=R=new Float32Array(e),i.HEAPF64=$=new Float64Array(e)}var G,H=[],Y=[],V=[];function Z(){var e=i.preRun.shift();H.unshift(e)}var J,X,ee,te,ne=0,re=null,ae=null;function ie(e){throw i.onAbort&&i.onAbort(e),_(e),L=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function oe(){return J.startsWith("data:application/octet-stream;base64,")}if(i.preloadedImages={},i.preloadedAudios={},J="sql-wasm.wasm",!oe()){var le=J;J=i.locateFile?i.locateFile(le,v):v+le}function se(){var e=J;try{if(e==J&&x)return new Uint8Array(x);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(e){ie(e)}}function ue(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(i);else{var n=t.Qb;"number"==typeof n?void 0===t.lb?G.get(n)():G.get(n)(t.lb):n(void 0===t.lb?null:t.lb)}}}function ce(e,t){for(var n=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e}function fe(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=ce(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function de(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function pe(e){if("/"===e)return"/";var t=(e=(e=fe(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)}function me(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=ce(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}var he=[];function be(e,t){he[e]={input:[],output:[],bb:t},Qe(e,ge)}var ge={open:function(e){var t=he[e.node.rdev];if(!t)throw new Le(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.bb.flush(e.tty)},flush:function(e){e.tty.bb.flush(e.tty)},read:function(e,t,n,r){if(!e.tty||!e.tty.bb.zb)throw new Le(60);for(var a=0,i=0;i<r;i++){try{var o=e.tty.bb.zb(e.tty)}catch(e){throw new Le(29)}if(void 0===o&&0===a)throw new Le(6);if(null==o)break;a++,t[n+i]=o}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,r){if(!e.tty||!e.tty.bb.pb)throw new Le(60);try{for(var a=0;a<r;a++)e.tty.bb.pb(e.tty,t[n+a])}catch(e){throw new Le(29)}return r&&(e.node.timestamp=Date.now()),a}},ye={zb:function(e){if(!e.input.length){var t=null;if(y){var n=Buffer.alloc(256),r=0;try{r=p.readSync(process.stdin.fd,n,0,256,null)}catch(e){if(!e.toString().includes("EOF"))throw e;r=0}t=0<r?n.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=Ot(t,!0)}return e.input.shift()},pb:function(e,t){null===t||10===t?(w(B(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(w(B(e.output,0)),e.output=[])}},ve={pb:function(e,t){null===t||10===t?(_(B(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(_(B(e.output,0)),e.output=[])}};function we(e){e=65536*Math.ceil(e/65536);var t=Rt(65536,e);return t?(q.fill(0,t,t+e),t):0}var _e={Ua:null,Va:function(){return _e.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new Le(63);return _e.Ua||(_e.Ua={dir:{node:{Ta:_e.La.Ta,Sa:_e.La.Sa,lookup:_e.La.lookup,fb:_e.La.fb,rename:_e.La.rename,unlink:_e.La.unlink,rmdir:_e.La.rmdir,readdir:_e.La.readdir,symlink:_e.La.symlink},stream:{Ya:_e.Ma.Ya}},file:{node:{Ta:_e.La.Ta,Sa:_e.La.Sa},stream:{Ya:_e.Ma.Ya,read:_e.Ma.read,write:_e.Ma.write,rb:_e.Ma.rb,gb:_e.Ma.gb,hb:_e.Ma.hb}},link:{node:{Ta:_e.La.Ta,Sa:_e.La.Sa,readlink:_e.La.readlink},stream:{}},vb:{node:{Ta:_e.La.Ta,Sa:_e.La.Sa},stream:Ue}}),Ie((n=Ae(e,t,n,r)).mode)?(n.La=_e.Ua.dir.node,n.Ma=_e.Ua.dir.stream,n.Na={}):32768==(61440&n.mode)?(n.La=_e.Ua.file.node,n.Ma=_e.Ua.file.stream,n.Ra=0,n.Na=null):40960==(61440&n.mode)?(n.La=_e.Ua.link.node,n.Ma=_e.Ua.link.stream):8192==(61440&n.mode)&&(n.La=_e.Ua.vb.node,n.Ma=_e.Ua.vb.stream),n.timestamp=Date.now(),e&&(e.Na[t]=n,e.timestamp=n.timestamp),n},Rb:function(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},wb:function(e,t){var n=e.Na?e.Na.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.Na,e.Na=new Uint8Array(t),0<e.Ra&&e.Na.set(n.subarray(0,e.Ra),0))},Nb:function(e,t){if(e.Ra!=t)if(0==t)e.Na=null,e.Ra=0;else{var n=e.Na;e.Na=new Uint8Array(t),n&&e.Na.set(n.subarray(0,Math.min(t,e.Ra))),e.Ra=t}},La:{Ta:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Ie(e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.Ra:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Fb=4096,t.blocks=Math.ceil(t.size/t.Fb),t},Sa:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&_e.Nb(e,t.size)},lookup:function(){throw Pe[44]},fb:function(e,t,n,r){return _e.createNode(e,t,n,r)},rename:function(e,t,n){if(Ie(e.mode)){try{var r=qe(t,n)}catch(e){}if(r)for(var a in r.Na)throw new Le(55)}delete e.parent.Na[e.name],e.parent.timestamp=Date.now(),e.name=n,t.Na[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Na[t],e.timestamp=Date.now()},rmdir:function(e,t){var n,r=qe(e,t);for(n in r.Na)throw new Le(55);delete e.Na[t],e.timestamp=Date.now()},readdir:function(e){var t,n=[".",".."];for(t in e.Na)e.Na.hasOwnProperty(t)&&n.push(t);return n},symlink:function(e,t,n){return(e=_e.createNode(e,t,41471,0)).link=n,e},readlink:function(e){if(40960!=(61440&e.mode))throw new Le(28);return e.link}},Ma:{read:function(e,t,n,r,a){var i=e.node.Na;if(a>=e.node.Ra)return 0;if(8<(e=Math.min(e.node.Ra-a,r))&&i.subarray)t.set(i.subarray(a,a+e),n);else for(r=0;r<e;r++)t[n+r]=i[a+r];return e},write:function(e,t,n,r,a,i){if(t.buffer===F.buffer&&(i=!1),!r)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(i)return e.Na=t.subarray(n,n+r),e.Ra=r;if(0===e.Ra&&0===a)return e.Na=t.slice(n,n+r),e.Ra=r;if(a+r<=e.Ra)return e.Na.set(t.subarray(n,n+r),a),r}if(_e.wb(e,a+r),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(n,n+r),a);else for(i=0;i<r;i++)e.Na[a+i]=t[n+i];return e.Ra=Math.max(e.Ra,a+r),r},Ya:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.Ra),0>t)throw new Le(28);return t},rb:function(e,t,n){_e.wb(e.node,t+n),e.node.Ra=Math.max(e.node.Ra,t+n)},gb:function(e,t,n,r,a,i){if(0!==t)throw new Le(28);if(32768!=(61440&e.node.mode))throw new Le(43);if(e=e.node.Na,2&i||e.buffer!==C){if((0<r||r+n<e.length)&&(e=e.subarray?e.subarray(r,r+n):Array.prototype.slice.call(e,r,r+n)),r=!0,!(n=we(n)))throw new Le(48);F.set(e,n)}else r=!1,n=e.byteOffset;return{Mb:n,jb:r}},hb:function(e,t,n,r,a){if(32768!=(61440&e.node.mode))throw new Le(43);return 2&a||_e.Ma.write(e,t,0,r,n,!1),0}}},Ee=null,xe={},ke=[],Se=1,Oe=null,Me=!0,je={},Le=null,Pe={};function Te(e,t){if(t=t||{},!(e=me("/",e)))return{path:"",node:null};var n,r={xb:!0,qb:0};for(n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.qb)throw new Le(32);e=ce(e.split("/").filter((function(e){return!!e})),!1);var a=Ee;for(r="/",n=0;n<e.length;n++){var i=n===e.length-1;if(i&&t.parent)break;if(a=qe(a,e[n]),r=fe(r+"/"+e[n]),a.$a&&(!i||i&&t.xb)&&(a=a.$a.root),!i||t.Xa)for(i=0;40960==(61440&a.mode);)if(a=Je(r),a=Te(r=me(de(r),a),{qb:t.qb}).node,40<i++)throw new Le(32)}return{path:r,node:a}}function De(e){for(var t;;){if(e===e.parent)return e=e.Va.Ab,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function Ce(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Oe.length}function Fe(e){var t=Ce(e.parent.id,e.name);if(Oe[t]===e)Oe[t]=e.ab;else for(t=Oe[t];t;){if(t.ab===e){t.ab=e.ab;break}t=t.ab}}function qe(e,t){var n;if(n=(n=ze(e,"x"))?n:e.La.lookup?0:2)throw new Le(n,e);for(n=Oe[Ce(e.id,t)];n;n=n.ab){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.La.lookup(e,t)}function Ae(e,t,n,r){return t=Ce((e=new St(e,t,n,r)).parent.id,e.name),e.ab=Oe[t],Oe[t]=e}function Ie(e){return 16384==(61440&e)}var Re={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090};function $e(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function ze(e,t){return Me?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2}function Be(e,t){try{return qe(e,t),20}catch(e){}return ze(e,"wx")}function Ne(e,t,n){try{var r=qe(e,t)}catch(e){return e.Pa}if(e=ze(e,"wx"))return e;if(n){if(!Ie(r.mode))return 54;if(r===r.parent||"/"===De(r))return 10}else if(Ie(r.mode))return 31;return 0}var We,Ue={open:function(e){e.Ma=xe[e.node.rdev].Ma,e.Ma.open&&e.Ma.open(e)},Ya:function(){throw new Le(70)}};function Qe(e,t){xe[e]={Ma:t}}function Ke(e,t){var n="/"===t,r=!t;if(n&&Ee)throw new Le(10);if(!n&&!r){var a=Te(t,{xb:!1});if(t=a.path,(a=a.node).$a)throw new Le(10);if(!Ie(a.mode))throw new Le(54)}t={type:e,Sb:{},Ab:t,Kb:[]},(e=e.Va(t)).Va=t,t.root=e,n?Ee=e:a&&(a.$a=t,a.Va&&a.Va.Kb.push(t))}function Ge(e,t,n){var r=Te(e,{parent:!0}).node;if(!(e=pe(e))||"."===e||".."===e)throw new Le(28);var a=Be(r,e);if(a)throw new Le(a);if(!r.La.fb)throw new Le(63);return r.La.fb(r,e,t,n)}function He(e,t){return Ge(e,1023&(void 0!==t?t:511)|16384,0)}function Ye(e,t,n){void 0===n&&(n=t,t=438),Ge(e,8192|t,n)}function Ve(e,t){if(!me(e))throw new Le(44);var n=Te(t,{parent:!0}).node;if(!n)throw new Le(44);var r=Be(n,t=pe(t));if(r)throw new Le(r);if(!n.La.symlink)throw new Le(63);n.La.symlink(n,t,e)}function Ze(e){var t=Te(e,{parent:!0}).node,n=pe(e),r=qe(t,n),a=Ne(t,n,!1);if(a)throw new Le(a);if(!t.La.unlink)throw new Le(63);if(r.$a)throw new Le(10);try{je.willDeletePath&&je.willDeletePath(e)}catch(t){_("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.La.unlink(t,n),Fe(r);try{je.onDeletePath&&je.onDeletePath(e)}catch(t){_("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}}function Je(e){if(!(e=Te(e).node))throw new Le(44);if(!e.La.readlink)throw new Le(28);return me(De(e.parent),e.La.readlink(e))}function Xe(e,t){if(!(e=Te(e,{Xa:!t}).node))throw new Le(44);if(!e.La.Ta)throw new Le(63);return e.La.Ta(e)}function et(e){return Xe(e,!0)}function tt(e,t){if(!(e="string"==typeof e?Te(e,{Xa:!0}).node:e).La.Sa)throw new Le(63);e.La.Sa(e,{mode:4095&t|-4096&e.mode,timestamp:Date.now()})}function nt(e){if(!(e="string"==typeof e?Te(e,{Xa:!0}).node:e).La.Sa)throw new Le(63);e.La.Sa(e,{timestamp:Date.now()})}function rt(e,t){if(0>t)throw new Le(28);if(!(e="string"==typeof e?Te(e,{Xa:!0}).node:e).La.Sa)throw new Le(63);if(Ie(e.mode))throw new Le(31);if(32768!=(61440&e.mode))throw new Le(28);var n=ze(e,"w");if(n)throw new Le(n);e.La.Sa(e,{size:t,timestamp:Date.now()})}function at(e,t,n,r){if(""===e)throw new Le(44);if("string"==typeof t){var a=Re[t];if(void 0===a)throw Error("Unknown file open mode: "+t);t=a}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var o=e;else{e=fe(e);try{o=Te(e,{Xa:!(131072&t)}).node}catch(e){}}if(a=!1,64&t)if(o){if(128&t)throw new Le(20)}else o=Ge(e,n,0),a=!0;if(!o)throw new Le(44);if(8192==(61440&o.mode)&&(t&=-513),65536&t&&!Ie(o.mode))throw new Le(54);if(!a&&(n=o?40960==(61440&o.mode)?32:Ie(o.mode)&&("r"!==$e(t)||512&t)?31:ze(o,$e(t)):44))throw new Le(n);512&t&&rt(o,0),t&=-131713,(r=function(e,t){pt||((pt=function(){}).prototype={});var n,r=new pt;for(n in e)r[n]=e[n];return e=r,t=function(e){for(e=e||0;e<=4096;e++)if(!ke[e])return e;throw new Le(33)}(t),e.fd=t,ke[t]=e}({node:o,path:De(o),flags:t,seekable:!0,position:0,Ma:o.Ma,Pb:[],error:!1},r)).Ma.open&&r.Ma.open(r),!i.logReadFiles||1&t||(mt||(mt={}),e in mt||(mt[e]=1,_("FS.trackingDelegate error on read file: "+e)));try{je.onOpenFile&&(o=0,1!=(2097155&t)&&(o|=1),0!=(2097155&t)&&(o|=2),je.onOpenFile(e,o))}catch(t){_("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return r}function it(e){if(null===e.fd)throw new Le(8);e.nb&&(e.nb=null);try{e.Ma.close&&e.Ma.close(e)}catch(e){throw e}finally{ke[e.fd]=null}e.fd=null}function ot(e,t,n){if(null===e.fd)throw new Le(8);if(!e.seekable||!e.Ma.Ya)throw new Le(70);if(0!=n&&1!=n&&2!=n)throw new Le(28);e.position=e.Ma.Ya(e,t,n),e.Pb=[]}function lt(e,t,n,r,a){if(0>r||0>a)throw new Le(28);if(null===e.fd)throw new Le(8);if(1==(2097155&e.flags))throw new Le(8);if(Ie(e.node.mode))throw new Le(31);if(!e.Ma.read)throw new Le(28);var i=void 0!==a;if(i){if(!e.seekable)throw new Le(70)}else a=e.position;return t=e.Ma.read(e,t,n,r,a),i||(e.position+=t),t}function st(e,t,n,r,a,i){if(0>r||0>a)throw new Le(28);if(null===e.fd)throw new Le(8);if(0==(2097155&e.flags))throw new Le(8);if(Ie(e.node.mode))throw new Le(31);if(!e.Ma.write)throw new Le(28);e.seekable&&1024&e.flags&&ot(e,0,2);var o=void 0!==a;if(o){if(!e.seekable)throw new Le(70)}else a=e.position;t=e.Ma.write(e,t,n,r,a,i),o||(e.position+=t);try{e.path&&je.onWriteToFile&&je.onWriteToFile(e.path)}catch(t){_("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return t}function ut(){Le||((Le=function(e,t){this.node=t,this.Ob=function(e){this.Pa=e},this.Ob(e),this.message="FS error"}).prototype=Error(),Le.prototype.constructor=Le,[44].forEach((function(e){Pe[e]=new Le(e),Pe[e].stack="<generic error, no stack>"})))}function ct(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}function ft(e,t,n){e=fe("/dev/"+e);var r=ct(!!t,!!n);dt||(dt=64);var a=dt++<<8|0;Qe(a,{open:function(e){e.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,n,r,a){for(var i=0,o=0;o<a;o++){try{var l=t()}catch(e){throw new Le(29)}if(void 0===l&&0===i)throw new Le(6);if(null==l)break;i++,n[r+o]=l}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,r,a){for(var i=0;i<a;i++)try{n(t[r+i])}catch(e){throw new Le(29)}return a&&(e.node.timestamp=Date.now()),i}}),Ye(e,r,a)}var dt,pt,mt,ht={},bt={};function gt(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&fe(t)!==fe(De(e.node)))return-54;throw e}return I[n>>2]=r.dev,I[n+4>>2]=0,I[n+8>>2]=r.ino,I[n+12>>2]=r.mode,I[n+16>>2]=r.nlink,I[n+20>>2]=r.uid,I[n+24>>2]=r.gid,I[n+28>>2]=r.rdev,I[n+32>>2]=0,ee=[r.size>>>0,(X=r.size,1<=+Math.abs(X)?0<X?(0|Math.min(+Math.floor(X/4294967296),4294967295))>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)],I[n+40>>2]=ee[0],I[n+44>>2]=ee[1],I[n+48>>2]=4096,I[n+52>>2]=r.blocks,I[n+56>>2]=r.atime.getTime()/1e3|0,I[n+60>>2]=0,I[n+64>>2]=r.mtime.getTime()/1e3|0,I[n+68>>2]=0,I[n+72>>2]=r.ctime.getTime()/1e3|0,I[n+76>>2]=0,ee=[r.ino>>>0,(X=r.ino,1<=+Math.abs(X)?0<X?(0|Math.min(+Math.floor(X/4294967296),4294967295))>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)],I[n+80>>2]=ee[0],I[n+84>>2]=ee[1],0}var yt,vt=void 0;function wt(){return I[(vt+=4)-4>>2]}function _t(e){if(!(e=ke[e]))throw new Le(8);return e}yt=y?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.now()};var Et,xt={};function kt(){if(!Et){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"};for(e in xt)void 0===xt[e]?delete t[e]:t[e]=xt[e];var n=[];for(e in t)n.push(e+"="+t[e]);Et=n}return Et}function St(e,t,n,r){e||(e=this),this.parent=e,this.Va=e.Va,this.$a=null,this.id=Se++,this.name=t,this.mode=n,this.La={},this.Ma={},this.rdev=r}function Ot(e,t){var n=Array(U(e)+1);return e=W(e,n,0,n.length),t&&(n.length=e),n}Object.defineProperties(St.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),ut(),Oe=Array(4096),Ke(_e,"/"),He("/tmp"),He("/home"),He("/home/web_user"),function(){He("/dev"),Qe(259,{read:function(){return 0},write:function(e,t,n,r){return r}}),Ye("/dev/null",259),be(1280,ye),be(1536,ve),Ye("/dev/tty",1280),Ye("/dev/tty1",1536);var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(y)try{var t=n(9824);return function(){return t.randomBytes(1)[0]}}catch(e){}return function(){ie("randomDevice")}}();ft("random",e),ft("urandom",e),He("/dev/shm"),He("/dev/shm/tmp")}(),function(){He("/proc");var e=He("/proc/self");He("/proc/self/fd"),Ke({Va:function(){var t=Ae(e,"fd",16895,73);return t.La={lookup:function(e,t){var n=ke[+t];if(!n)throw new Le(8);return(e={parent:null,Va:{Ab:"fake"},La:{readlink:function(){return n.path}}}).parent=e}},t}},"/proc/self/fd")}();var Mt={a:function(e,t,n,r){ie("Assertion failed: "+N(e)+", at: "+[t?N(t):"unknown filename",n,r?N(r):"unknown function"])},r:function(e,t){te||(te=!0,function(){function e(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var t=(new Date).getFullYear(),n=new Date(t,0,1),r=new Date(t,6,1);t=n.getTimezoneOffset();var a=r.getTimezoneOffset(),i=Math.max(t,a);I[Ft()>>2]=60*i,I[Ct()>>2]=Number(t!=a),n=e(n),r=e(r),n=Q(n),r=Q(r),a<t?(I[Dt()>>2]=n,I[Dt()+4>>2]=r):(I[Dt()>>2]=r,I[Dt()+4>>2]=n)}()),e=new Date(1e3*I[e>>2]),I[t>>2]=e.getSeconds(),I[t+4>>2]=e.getMinutes(),I[t+8>>2]=e.getHours(),I[t+12>>2]=e.getDate(),I[t+16>>2]=e.getMonth(),I[t+20>>2]=e.getFullYear()-1900,I[t+24>>2]=e.getDay();var n=new Date(e.getFullYear(),0,1);I[t+28>>2]=(e.getTime()-n.getTime())/864e5|0,I[t+36>>2]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset();return e=0|(r!=(n=n.getTimezoneOffset())&&e.getTimezoneOffset()==Math.min(n,r)),I[t+32>>2]=e,e=I[Dt()+(e?4:0)>>2],I[t+40>>2]=e,t},x:function(e,t){try{var n;if(e=N(e),-8&t)var r=-28;else(n=Te(e,{Xa:!0}).node)?(e="",4&t&&(e+="r"),2&t&&(e+="w"),1&t&&(e+="x"),r=e&&ze(n,e)?-2:0):r=-44;return r}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},G:function(e,t){try{return tt(e=N(e),t),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},B:function(e){try{return nt(e=N(e)),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},H:function(e,t){try{var n=ke[e];if(!n)throw new Le(8);return tt(n.node,t),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},C:function(e){try{var t=ke[e];if(!t)throw new Le(8);return nt(t.node),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},b:function(e,t,n){vt=n;try{var r=_t(e);switch(t){case 0:var a=wt();return 0>a?-28:at(r.path,r.flags,0,a).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:return a=wt(),r.flags|=a,0;case 12:return a=wt(),A[a+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return I[jt()>>2]=28,-1;default:return-28}}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},F:function(e,t){try{return gt(Xe,_t(e).path,t)}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},D:function(e,t,n){try{var r=ke[e];if(!r)throw new Le(8);if(0==(2097155&r.flags))throw new Le(28);return rt(r.node,n),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},t:function(e,t){try{return 0===t?-28:t<U("/")+1?-68:(W("/",q,e,t),e)}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},s:function(){return 0},d:function(){return 42},J:function(e,t){try{return gt(et,e=N(e),t)}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},I:function(e,t){try{return"/"===(e=fe(e=N(e)))[e.length-1]&&(e=e.substr(0,e.length-1)),He(e,t),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},k:function(e,t,n,r,a,i){try{e:{i<<=12;var o=!1;if(0!=(16&r)&&0!=e%65536)var l=-28;else{if(0!=(32&r)){var s=we(t);if(!s){l=-48;break e}o=!0}else{var u=ke[a];if(!u){l=-8;break e}var c=i;if(0!=(2&n)&&0==(2&r)&&2!=(2097155&u.flags))throw new Le(2);if(1==(2097155&u.flags))throw new Le(2);if(!u.Ma.gb)throw new Le(43);var f=u.Ma.gb(u,e,t,c,n,r);s=f.Mb,o=f.jb}bt[s]={Jb:s,Ib:t,jb:o,fd:a,Lb:n,flags:r,offset:i},l=s}}return l}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},j:function(e,t){try{var n=bt[e];if(0!==t&&n){if(t===n.Ib){var r=ke[n.fd];if(r&&2&n.Lb){var a=n.flags,i=n.offset,o=q.slice(e,e+t);r&&r.Ma.hb&&r.Ma.hb(r,o,i,t,a)}bt[e]=null,n.jb&&Pt(n.Jb)}var l=0}else l=-28;return l}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},h:function(e,t,n){vt=n;try{return at(N(e),t,n?wt():0).fd}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},E:function(e,t,n){try{if(e=N(e),0>=n)var r=-28;else{var a=Je(e),i=Math.min(n,U(a)),o=F[t+i];W(a,q,t,n+1),F[t+i]=o,r=i}return r}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},y:function(e){try{var t=Te(e=N(e),{parent:!0}).node,n=pe(e),r=qe(t,n),a=Ne(t,n,!0);if(a)throw new Le(a);if(!t.La.rmdir)throw new Le(63);if(r.$a)throw new Le(10);try{je.willDeletePath&&je.willDeletePath(e)}catch(t){_("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.La.rmdir(t,n),Fe(r);try{je.onDeletePath&&je.onDeletePath(e)}catch(t){_("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}return 0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},f:function(e,t){try{return gt(Xe,e=N(e),t)}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},u:function(e){try{return Ze(e=N(e)),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),-e.Pa}},i:function(){return 2147483648},m:function(e,t,n){q.copyWithin(e,t,t+n)},c:function(e){var t=q.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296),0<(r=Math.max(e,r))%65536&&(r+=65536-r%65536);e:{try{j.grow(Math.min(2147483648,r)-C.byteLength+65535>>>16),K();var a=1;break e}catch(e){}a=void 0}if(a)return!0}return!1},q:function(e){for(var t=yt();yt()-t<e;);},o:function(e,t){var n=0;return kt().forEach((function(r,a){var i=t+n;for(a=I[e+4*a>>2]=i,i=0;i<r.length;++i)F[a++>>0]=r.charCodeAt(i);F[a>>0]=0,n+=r.length+1})),0},p:function(e,t){var n=kt();I[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),I[t>>2]=r,0},e:function(e){try{return it(_t(e)),0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),e.Pa}},n:function(e,t){try{var n=_t(e);return F[t>>0]=n.tty?2:Ie(n.mode)?3:40960==(61440&n.mode)?7:4,0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),e.Pa}},z:function(e,t,n,r){try{e:{for(var a=_t(e),i=e=0;i<n;i++){var o=I[t+(8*i+4)>>2],l=lt(a,F,I[t+8*i>>2],o,void 0);if(0>l){var s=-1;break e}if(e+=l,l<o)break}s=e}return I[r>>2]=s,0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),e.Pa}},l:function(e,t,n,r,a){try{var i=_t(e);return-9007199254740992>=(e=4294967296*n+(t>>>0))||9007199254740992<=e?-61:(ot(i,e,r),ee=[i.position>>>0,(X=i.position,1<=+Math.abs(X)?0<X?(0|Math.min(+Math.floor(X/4294967296),4294967295))>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)],I[a>>2]=ee[0],I[a+4>>2]=ee[1],i.nb&&0===e&&0===r&&(i.nb=null),0)}catch(e){return void 0!==ht&&e instanceof Le||ie(e),e.Pa}},w:function(e){try{var t=_t(e);return t.Ma&&t.Ma.fsync?-t.Ma.fsync(t):0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),e.Pa}},v:function(e,t,n,r){try{e:{for(var a=_t(e),i=e=0;i<n;i++){var o=st(a,F,I[t+8*i>>2],I[t+(8*i+4)>>2],void 0);if(0>o){var l=-1;break e}e+=o}l=e}return I[r>>2]=l,0}catch(e){return void 0!==ht&&e instanceof Le||ie(e),e.Pa}},g:function(e){var t=Date.now();return I[e>>2]=t/1e3|0,I[e+4>>2]=t%1e3*1e3|0,0},K:function(e){var t=Date.now()/1e3|0;return e&&(I[e>>2]=t),t},A:function(e,t){if(t){var n=t+8;t=1e3*I[n>>2],t+=I[n+4>>2]/1e3}else t=Date.now();e=N(e);try{var r=Te(e,{Xa:!0}).node;r.La.Sa(r,{timestamp:Math.max(t,t)});var a=0}catch(e){if(!(e instanceof Le)){e:{if(!(a=Error()).stack){try{throw Error()}catch(e){a=e}if(!a.stack){a="(no stack trace available)";break e}}a=a.stack.toString()}throw i.extraStackTrace&&(a+="\n"+i.extraStackTrace()),e+" : "+(a=function(e){return e.replace(/\b_Z[\w\d_]+/g,(function(e){return e==e?e:e+" ["+e+"]"}))}(a))}a=e.Pa,I[jt()>>2]=a,a=-1}return a}};!function(){function e(e){i.asm=e.exports,j=i.asm.L,K(),G=i.asm.Ca,Y.unshift(i.asm.M),ne--,i.monitorRunDependencies&&i.monitorRunDependencies(ne),0==ne&&(null!==re&&(clearInterval(re),re=null),ae&&(e=ae,ae=null,e()))}function t(t){e(t.instance)}function n(e){return function(){if(!x&&(b||g)){if("function"==typeof fetch&&!J.startsWith("file://"))return fetch(J,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+J+"'";return e.arrayBuffer()})).catch((function(){return se()}));if(f)return new Promise((function(e,t){f(J,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return se()}))}().then((function(e){return WebAssembly.instantiate(e,r)})).then((function(e){return e})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),ie(e)}))}var r={a:Mt};if(ne++,i.monitorRunDependencies&&i.monitorRunDependencies(ne),i.instantiateWasm)try{return i.instantiateWasm(r,e)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}x||"function"!=typeof WebAssembly.instantiateStreaming||oe()||J.startsWith("file://")||"function"!=typeof fetch?n(t):fetch(J,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),n(t)}))}))}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.M).apply(null,arguments)},i._sqlite3_free=function(){return(i._sqlite3_free=i.asm.N).apply(null,arguments)};var jt=i.___errno_location=function(){return(jt=i.___errno_location=i.asm.O).apply(null,arguments)};i._sqlite3_step=function(){return(i._sqlite3_step=i.asm.P).apply(null,arguments)},i._sqlite3_finalize=function(){return(i._sqlite3_finalize=i.asm.Q).apply(null,arguments)},i._sqlite3_prepare_v2=function(){return(i._sqlite3_prepare_v2=i.asm.R).apply(null,arguments)},i._sqlite3_reset=function(){return(i._sqlite3_reset=i.asm.S).apply(null,arguments)},i._sqlite3_clear_bindings=function(){return(i._sqlite3_clear_bindings=i.asm.T).apply(null,arguments)},i._sqlite3_value_blob=function(){return(i._sqlite3_value_blob=i.asm.U).apply(null,arguments)},i._sqlite3_value_text=function(){return(i._sqlite3_value_text=i.asm.V).apply(null,arguments)},i._sqlite3_value_bytes=function(){return(i._sqlite3_value_bytes=i.asm.W).apply(null,arguments)},i._sqlite3_value_double=function(){return(i._sqlite3_value_double=i.asm.X).apply(null,arguments)},i._sqlite3_value_int=function(){return(i._sqlite3_value_int=i.asm.Y).apply(null,arguments)},i._sqlite3_value_type=function(){return(i._sqlite3_value_type=i.asm.Z).apply(null,arguments)},i._sqlite3_result_blob=function(){return(i._sqlite3_result_blob=i.asm._).apply(null,arguments)},i._sqlite3_result_double=function(){return(i._sqlite3_result_double=i.asm.$).apply(null,arguments)},i._sqlite3_result_error=function(){return(i._sqlite3_result_error=i.asm.aa).apply(null,arguments)},i._sqlite3_result_int=function(){return(i._sqlite3_result_int=i.asm.ba).apply(null,arguments)},i._sqlite3_result_int64=function(){return(i._sqlite3_result_int64=i.asm.ca).apply(null,arguments)},i._sqlite3_result_null=function(){return(i._sqlite3_result_null=i.asm.da).apply(null,arguments)},i._sqlite3_result_text=function(){return(i._sqlite3_result_text=i.asm.ea).apply(null,arguments)},i._sqlite3_column_count=function(){return(i._sqlite3_column_count=i.asm.fa).apply(null,arguments)},i._sqlite3_data_count=function(){return(i._sqlite3_data_count=i.asm.ga).apply(null,arguments)},i._sqlite3_column_blob=function(){return(i._sqlite3_column_blob=i.asm.ha).apply(null,arguments)},i._sqlite3_column_bytes=function(){return(i._sqlite3_column_bytes=i.asm.ia).apply(null,arguments)},i._sqlite3_column_double=function(){return(i._sqlite3_column_double=i.asm.ja).apply(null,arguments)},i._sqlite3_column_text=function(){return(i._sqlite3_column_text=i.asm.ka).apply(null,arguments)},i._sqlite3_column_type=function(){return(i._sqlite3_column_type=i.asm.la).apply(null,arguments)},i._sqlite3_column_name=function(){return(i._sqlite3_column_name=i.asm.ma).apply(null,arguments)},i._sqlite3_bind_blob=function(){return(i._sqlite3_bind_blob=i.asm.na).apply(null,arguments)},i._sqlite3_bind_double=function(){return(i._sqlite3_bind_double=i.asm.oa).apply(null,arguments)},i._sqlite3_bind_int=function(){return(i._sqlite3_bind_int=i.asm.pa).apply(null,arguments)},i._sqlite3_bind_text=function(){return(i._sqlite3_bind_text=i.asm.qa).apply(null,arguments)},i._sqlite3_bind_parameter_index=function(){return(i._sqlite3_bind_parameter_index=i.asm.ra).apply(null,arguments)},i._sqlite3_sql=function(){return(i._sqlite3_sql=i.asm.sa).apply(null,arguments)},i._sqlite3_normalized_sql=function(){return(i._sqlite3_normalized_sql=i.asm.ta).apply(null,arguments)},i._sqlite3_errmsg=function(){return(i._sqlite3_errmsg=i.asm.ua).apply(null,arguments)},i._sqlite3_exec=function(){return(i._sqlite3_exec=i.asm.va).apply(null,arguments)},i._sqlite3_changes=function(){return(i._sqlite3_changes=i.asm.wa).apply(null,arguments)},i._sqlite3_close_v2=function(){return(i._sqlite3_close_v2=i.asm.xa).apply(null,arguments)},i._sqlite3_create_function_v2=function(){return(i._sqlite3_create_function_v2=i.asm.ya).apply(null,arguments)},i._sqlite3_open=function(){return(i._sqlite3_open=i.asm.za).apply(null,arguments)};var Lt=i._malloc=function(){return(Lt=i._malloc=i.asm.Aa).apply(null,arguments)},Pt=i._free=function(){return(Pt=i._free=i.asm.Ba).apply(null,arguments)};i._RegisterExtensionFunctions=function(){return(i._RegisterExtensionFunctions=i.asm.Da).apply(null,arguments)};var Tt,Dt=i.__get_tzname=function(){return(Dt=i.__get_tzname=i.asm.Ea).apply(null,arguments)},Ct=i.__get_daylight=function(){return(Ct=i.__get_daylight=i.asm.Fa).apply(null,arguments)},Ft=i.__get_timezone=function(){return(Ft=i.__get_timezone=i.asm.Ga).apply(null,arguments)},qt=i.stackSave=function(){return(qt=i.stackSave=i.asm.Ha).apply(null,arguments)},At=i.stackRestore=function(){return(At=i.stackRestore=i.asm.Ia).apply(null,arguments)},It=i.stackAlloc=function(){return(It=i.stackAlloc=i.asm.Ja).apply(null,arguments)},Rt=i._memalign=function(){return(Rt=i._memalign=i.asm.Ka).apply(null,arguments)};function $t(){function e(){if(!Tt&&(Tt=!0,i.calledRun=!0,!L)){if(i.noFSInit||We||(We=!0,ut(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?ft("stdin",i.stdin):Ve("/dev/tty","/dev/stdin"),i.stdout?ft("stdout",null,i.stdout):Ve("/dev/tty","/dev/stdout"),i.stderr?ft("stderr",null,i.stderr):Ve("/dev/tty1","/dev/stderr"),at("/dev/stdin",0),at("/dev/stdout",1),at("/dev/stderr",1)),Me=!1,ue(Y),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();V.unshift(e)}ue(V)}}if(!(0<ne)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)Z();ue(H),0<ne||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e())}}if(i.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?P(e):function(){return T(e,t,n,arguments)}},i.UTF8ToString=N,i.stackSave=qt,i.stackRestore=At,i.stackAlloc=It,ae=function e(){Tt||$t(),Tt||(ae=e)},i.run=$t,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return $t(),o})))};e.exports=a,e.exports.default=a},2269:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const a=r(n(5677)),i=r(n(5571)),o=n(3334),l=n(838),s=n(175),u=n(37),c=n(1090),f=n(5592),d=n(149),p=n(6543),m=n(8719),h=n(8914),b=n(7975),g=n(1879);t.App=()=>a.default.createElement(b.ProvideAppState,null,a.default.createElement(w,null));const y=i.default.div`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
`,v=()=>{const{features:e,agencies:t,lines:n}=(0,d.useData2)();return a.default.createElement(y,null,a.default.createElement(l.OverviewMap,{lines:n,features:e}),a.default.createElement(u.Controls,null),a.default.createElement(c.SettingsDrawer,null),a.default.createElement(m.LegendDrawer,{lines:n,allAgencies:t}),a.default.createElement(f.Logo,null),a.default.createElement(g.SearchBar,null))},w=()=>{const e=(0,o.useMediaQuery)("(prefers-color-scheme: dark)"),{appTheme:t}=(0,b.useAppState)(),n=a.default.useMemo((()=>{const n="system"===t&&e||"dark"===t;return(0,s.themeFactory)(n)}),[e,t]);return a.default.createElement(o.StyledEngineProvider,{injectFirst:!0},a.default.createElement(o.ThemeProvider,{theme:n},a.default.createElement(d.ProvideData2,null,a.default.createElement(p.ProvideWindow,null,a.default.createElement(h.ProvideMapTarget,null,a.default.createElement(v,null))))))}},5356:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.search=t.processBounds=t.processFeatures=t.prepDatabase=void 0;const a=r(n(3472)),i=r(n(5767));function o(e){return`"${e.replace(/\"/g,'""')}"`}t.prepDatabase=async function(){const e=new((await(0,a.default)()).Database);return e.run(i.default),e},t.processFeatures=async function(e,t,n,r){e.exec("BEGIN TRANSACTION;");const a=e.prepare("INSERT INTO stations_search VALUES($name, $description, $parent, $terms, $lines, $lng, $lat)"),i={};t.features.filter((e=>"station-label"===e.properties.type)).forEach((e=>{const t=e.properties.name+e.properties.lines.sort().join();i[t]=e})),Object.values(i).forEach((e=>{var t,i;const o=e.geometry,l={$name:e.properties.name,$description:`${n[e.properties.agency].name} â€” ${r[e.properties.region].title}`,$parent:e.properties.parent,$terms:null!==(i=null===(t=e.properties.searchTerms)||void 0===t?void 0:t.join())&&void 0!==i?i:"",$lng:o.coordinates[0],$lat:o.coordinates[1],$lines:e.properties.lines.join()};a.run(l)})),e.exec("COMMIT;")},t.processBounds=async function(e,t,n,r){e.exec("BEGIN TRANSACTION;");const a=e.prepare("INSERT INTO bounds_search VALUES($name, $description, $terms, $id, $type, $bounds)");t.forEach((e=>{var t,i;const o={$name:e.name,$description:`${n[e.agency].name} â€” ${r[e.region].title}`,$terms:null!==(i=null===(t=e.searchTerms)||void 0===t?void 0:t.join())&&void 0!==i?i:"",$id:e.id,$type:e.type,$bounds:JSON.stringify(e.bbox)};a.run(o)})),e.exec("COMMIT;")},t.search=async function(e,t){return[...await async function(e,t,n=10){if(""===t)return[];const r=e.prepare("SELECT *, rank FROM stations_search WHERE stations_search MATCH $query || '*' ORDER BY rank LIMIT $limit");r.bind({$query:t,$limit:n});const a=[];for(;r.step();){const e=r.getAsObject(),t={...e,type:"station",lines:e.lines.split(",")};a.push(t)}return r.free(),a}(e,o(t)),...await async function(e,t,n=10){if(""===t)return[];const r=e.prepare("SELECT *, rank FROM bounds_search WHERE bounds_search MATCH $query || '*' ORDER BY rank LIMIT $limit");r.bind({$query:t,$limit:n});const a=[];for(;r.step();){const e=r.getAsObject(),t={...e,bounds:JSON.parse(e.bounds)};a.push(t)}return r.free(),a}(e,o(t))].sort(((e,t)=>e.rank-t.rank))}},175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themeFactory=void 0;const r=n(3334);t.themeFactory=(e=!1)=>(0,r.createTheme)({palette:e?i:a});const a={mode:"light",primary:{main:"#cc0000"},secondary:{main:"#cc0000"}},i={mode:"dark",primary:{main:"#ff4f30"},secondary:{main:"#ff4f30"}}},9107:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLineEnabled=t.useIsDarkTheme=void 0;const r=n(3334);t.useIsDarkTheme=e=>{const t=(0,r.useMediaQuery)("(prefers-color-scheme: dark)");return"system"===e&&t||"dark"===e},t.isLineEnabled=(e,t)=>{var n;if(void 0===e)return!0;if(e.startsWith("!")){const n=e.split(",");let r=!0;return n.forEach((e=>{var n;r&&(r=!(null!==(n=t[e.slice(1)])&&void 0!==n&&n))})),r}return null!==(n=t[e])&&void 0!==n&&n}},4173:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Chevron=void 0;const a=r(n(5571));t.Chevron=a.default.div`
  display: inline-block;
  margin-top: 4px;
  width: 24px;
  height: 20px;
  &:before {
    width: 3px;
    height: 10px;
    transition: all 0.5s cubic-bezier(0.33, 1, 0.68, 1);
    display: inline-block;
    border-radius: 2px;
    background: ${e=>{var t;return null!==(t=e.color)&&void 0!==t?t:"#FFFFFF"}};
    transform: ${e=>e.down?"rotate(-135deg)":"rotate(-45deg)"};
    content: "";
  }
  &:after {
    width: 3px;
    height: 10px;
    transition: all 0.5s cubic-bezier(0.33, 1, 0.68, 1);
    display: inline-block;
    border-radius: 2px;
    background: ${e=>{var t;return null!==(t=e.color)&&void 0!==t?t:"#FFFFFF"}};
    transform: ${e=>e.down?"rotate(-45deg)":"rotate(-135deg)"};
    content: "";
    margin-left: 3px;
  }
`},7954:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MapIcon=void 0;const o=i(n(5677)),l=n(8049);t.MapIcon=({width:e,height:t,...n})=>{const r=window.devicePixelRatio,a=(0,o.useRef)(new Image(e*r,t*r)),{current:i}=(0,l.useMap)(),s=()=>{i.hasImage(n.id)||i.addImage(n.id,a.current,{pixelRatio:r})};return(0,o.useEffect)((()=>{const e=a.current;return e.onload=()=>{s()},e.src=n.url,i.on("styleimagemissing",(e=>{e.id===n.id&&s()})),()=>{i.hasImage(n.id)&&i.removeImage(n.id)}}),[]),o.default.createElement(o.default.Fragment,null)}},1455:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Lines=void 0;const o=i(n(5677)),l=n(8049),s=n(838),u=n(9107),c=n(7975);t.Lines=o.default.memo((({data:e,showLineLabels:t,filterList:n})=>{const{labelStyle:r}=(0,o.useContext)(s.LabelProviderContext),{appTheme:a}=(0,c.useAppState)(),i=(0,u.useIsDarkTheme)(a);return o.default.createElement(l.Source,{id:"raildata",type:"geojson",data:e},o.default.createElement(l.Layer,{id:"yard-tracks",type:"line",filter:["all",["==",["get","type"],"tracks"],["in",["get","class"],["literal",["rail-yard","streetcar-yard"]]],["!",["in",["get","filterKey"],["literal",n]]]],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":"#818181","line-width":["case",["==",["get","class"],"streetcar-yard"],2,3],"line-offset":["*",["get","offset"],["case",["==",["get","class"],"streetcar-yard"],2,3]]}}),o.default.createElement(l.Layer,{id:"rail-tunnel",type:"fill",filter:["all",["==",["get","type"],"tunnel"],["!",["in",["get","filterKey"],["literal",n]]]],minzoom:14,layout:{"fill-sort-key":["get","layer"]},paint:{"fill-color":"#212121","fill-opacity":["interpolate",["linear"],["zoom"],14,0,15,.3]}}),o.default.createElement(l.Layer,{id:"rail-platforms",type:"fill",filter:["all",["==",["get","type"],"station-platforms"],["!",["in",["get","filterKey"],["literal",n]]]],layout:{"fill-sort-key":["get","layer"]},paint:{"fill-color":["get","color"],"fill-opacity":.68}}),o.default.createElement(l.Layer,{id:"rail-platforms-future",type:"line",filter:["all",["==",["get","type"],"station-platforms-future"],["!",["in",["get","filterKey"],["literal",n]]]],layout:{"line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-dasharray":[3,3],"line-width":1.5}}),o.default.createElement(l.Layer,{id:"rail-alignment",type:"line",filter:["all",["==",["get","type"],"alignment"],["!",["in",["get","filterKey"],["literal",n]]]],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-opacity":["interpolate",["linear"],["zoom"],14,1,20,.3],"line-width":["interpolate",["exponential",2],["zoom"],14,3,20,150],"line-offset":["interpolate",["exponential",2],["zoom"],14,["*",["get","offset"],3],20,["*",["get","offset"],150]]}}),o.default.createElement(l.Layer,{id:"rail-tracks",type:"line",filter:["all",["==",["get","type"],"tracks"],["==",["get","class"],"rail-line"],["!",["in",["get","filterKey"],["literal",n]]]],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-width":3,"line-offset":["*",["get","offset"],3]}}),o.default.createElement(l.Layer,{id:"streetcar-tracks",type:"line",filter:["all",["==",["get","type"],"tracks"],["==",["get","class"],"streetcar-line"],["!",["in",["get","filterKey"],["literal",n]]]],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-width":1.5,"line-offset":["*",["get","offset"],1.5]}}),o.default.createElement(l.Layer,{id:"rail-tracks-future",type:"line",filter:["all",["==",["get","type"],"tracks-future"],["!",["in",["get","filterKey"],["literal",n]]]],layout:{"line-join":"round","line-cap":"round","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-width":3,"line-dasharray":[3,3]}}),o.default.createElement(l.Layer,{id:"rail-overpass",type:"line",filter:["all",["==",["get","type"],"overpass"],["!",["in",["get","filterKey"],["literal",n]]]],minzoom:14,layout:{"line-join":"round","line-cap":"butt","line-sort-key":["get","layer"]},paint:{"line-color":["get","color"],"line-width":1,"line-gap-width":["interpolate",["exponential",2],["zoom"],15,0,18,15],"line-offset":["*",["get","offset"],3]}}),o.default.createElement(l.Layer,{id:"rail-connector-labels-dash",type:"line",filter:["all",["==",["get","type"],"station-connector-label"],["!",["in",["get","filterKey"],["literal",n]]]],minzoom:15,layout:{"line-cap":"round"},paint:{"line-width":2,"line-color":i?"#FFFFFF":"#212121","line-gap-width":10,"line-dasharray":[4,4]}}),o.default.createElement(l.Layer,{id:"streetcar-rail-station",type:"circle",filter:["all",["==",["get","type"],"station-label"],["==",["get","class"],"streetcar-line"],["!",["in",["get","filterKey"],["literal",n]]]],minzoom:11,layout:{},paint:{"circle-color":"#FFFFFF","circle-stroke-color":["get","color"],"circle-stroke-width":2,"circle-radius":["interpolate",["exponential",2],["zoom"],10,2,17,6],"circle-pitch-alignment":"map"}}),o.default.createElement(l.Layer,{id:"rail-station",type:"circle",filter:["all",["==",["get","type"],"station-label"],["==",["get","class"],"rail-line"],["!",["in",["get","filterKey"],["literal",n]]]],layout:{},paint:{"circle-color":"#ffffff","circle-stroke-color":"#212121","circle-stroke-width":2,"circle-radius":["interpolate",["linear"],["zoom"],10,2,13.5,6],"circle-pitch-alignment":"map"}}),o.default.createElement(l.Layer,{id:"rail-connector-labels-bg",type:"line",filter:["all",["==",["get","type"],"station-connector-label"],["!",["in",["get","filterKey"],["literal",n]]]],maxzoom:16,layout:{"line-cap":"round"},paint:{"line-width":["interpolate",["linear"],["zoom"],10,8,13.5,16],"line-color":"#212121","line-opacity":["interpolate",["linear"],["zoom"],15,1,16,0]}}),o.default.createElement(l.Layer,{id:"rail-connector-labels",type:"line",filter:["all",["==",["get","type"],"station-connector-label"],["!",["in",["get","filterKey"],["literal",n]]]],maxzoom:16,layout:{"line-cap":"round"},paint:{"line-width":["interpolate",["linear"],["zoom"],10,4,13.5,12],"line-color":"#FFFFFF","line-opacity":["interpolate",["linear"],["zoom"],15,1,16,0]}}),t&&o.default.createElement(l.Layer,{id:"yard-labels",type:"symbol",filter:["all",["==",["get","type"],"yard-label"],["!",["in",["get","filterKey"],["literal",n]]]],minzoom:14,layout:{"text-field":["get","name"],"text-anchor":"center","text-optional":!0,"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}),t&&o.default.createElement(l.Layer,{id:"rail-labels",type:"symbol",filter:["all",["==",["get","class"],"rail-line"],["==",["get","type"],"station-label"],["!",["in",["get","filterKey"],["literal",n]]]],minzoom:13,layout:{"text-field":r,"text-anchor":"left","text-offset":[.75,0],"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}),t&&o.default.createElement(l.Layer,{id:"streetcar-labels",type:"symbol",filter:["all",["==",["get","class"],"streetcar-line"],["==",["get","type"],"station-label"],["!",["in",["get","filterKey"],["literal",n]]]],minzoom:15,layout:{"text-field":r,"text-anchor":"left","text-offset":[.75,0],"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}),t&&o.default.createElement(l.Layer,{id:"rail-labels-major",type:"symbol",filter:["all",["==",["get","type"],"station-label"],["==",["get","major"],!0],["!",["in",["get","filterKey"],["literal",n]]]],maxzoom:13,minzoom:9,layout:{"text-field":r,"text-anchor":"left","text-offset":[.75,0],"text-font":["Raleway Bold"],"text-size":16,"icon-image":"label-background","icon-text-fit":"both","icon-text-fit-padding":[1,4,0,4]},paint:{"text-color":"#FFFFFF"}}))}))},5592:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;const a=r(n(5677)),i=n(9107),o=r(n(380)),l=r(n(4559)),s=n(7975),u=r(n(5571)).default.img`
  position: fixed;
  width: 140px;
  bottom: ${({theme:e})=>e.spacing(2)};
  left: calc(50% - 70px);
`;t.Logo=()=>{const{appTheme:e}=(0,s.useAppState)(),t=(0,i.useIsDarkTheme)(e);return a.default.createElement("a",{href:"https://www.railfans.ca"},a.default.createElement(u,{alt:"RailFans Canada Logo",src:t?l.default:o.default}))}},838:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewMap=t.LabelProviderContext=void 0;const l=i(n(5677)),s=i(n(8049));n(1168);const u=n(1455),c=n(9107),f=n(7954),d=n(6543),p=o(n(8617)),m=n(8914),h=n(7975),b=n(7228),g=n(6707),y=(e,t)=>{const n={...e};return t.filter((e=>{var t;return!(null===(t=e.filterKey)||void 0===t?void 0:t.startsWith("!"))})).forEach((e=>{e.filterKey&&!n.hasOwnProperty(e.filterKey)&&(n[e.filterKey]=!1)})),[...Object.entries(n).filter((([e,t])=>!t)).map((([e])=>e)),...Object.entries(n).filter((([e,t])=>t)).map((([e])=>`!${e}`))]};t.LabelProviderContext=l.default.createContext({labelStyle:[]});const v={type:"FeatureCollection",features:g.config.regions.map((e=>({type:"Feature",bbox:e.bbox,geometry:{type:"Point",coordinates:e.location},properties:{type:"region-label",id:e.id,name:e.title,target:e.bbox}})))},w=null!=localStorage.settings?JSON.parse(localStorage.settings).lastLocation:null,_=w?{longitude:w[0],latitude:w[1],zoom:w[2],bearing:w[3]}:{longitude:-73.5713,latitude:45.5163,zoom:11.35};t.OverviewMap=e=>{const n=(0,b.useTheme)(),r=(0,d.useWindow)(),{legendDrawerOpen:a,settingsDrawerOpen:i,appTheme:o,mapStyle:g,show3DBuildings:w,showLabels:E,lineFilterState:x,setLastLocation:k}=(0,h.useAppState)(),S=(0,l.useRef)(),{target:O,setTarget:M}=(0,m.useMapTarget)();(0,l.useEffect)((()=>{var e;if(null!=O){const t=null===(e=S.current)||void 0===e?void 0:e.getMap();null==t||t.fitBounds(O,{padding:64})}}),[O]),(0,l.useEffect)((()=>{var e,t;const o=i||a;if(r[0]>n.breakpoints.values.md){const n={right:o?420:0};null===(t=null===(e=S.current)||void 0===e?void 0:e.getMap())||void 0===t||t.easeTo({padding:n})}}),[i,a,r]);const j=(0,c.useIsDarkTheme)(o),[L,P]=(0,l.useState)("satellite"===g?"mapbox://styles/mapbox/satellite-streets-v11":j?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10"),[T,D]=(0,l.useState)([]),[C,F]=(0,l.useState)(null);(0,l.useEffect)((()=>{P("satellite"===g?"mapbox://styles/mapbox/satellite-streets-v11":j?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10")}),[j,o,g]),(0,l.useEffect)((()=>{var t,n;D((t=e.lines,n=x,["format",["get","name"],{}," ",{},...Object.values(t).filter((e=>null!=e.icon&&(0,c.isLineEnabled)(e.filterKey,n))).map((e=>e.id)).sort().flatMap((e=>[["case",["in",e,["get","lines"]],["image",e],""],{}]))]))}),[e.lines,x]);const[q,A]=(0,l.useState)([]);return(0,l.useEffect)((()=>{A(E?["rail-station","rail-labels","yard-labels","regions-labels"]:["rail-station","regions-labels"])}),[E]),l.default.createElement(s.default,{style:{width:r[0],height:r[1]},mapStyle:L,mapboxAccessToken:"pk.eyJ1IjoiZGVsbGlzZCIsImEiOiJjazBoZm03OG8wMjR2M2lxbjNqcHgyc3BvIn0.XPgZCMrBCvS-usaM2bnjlA",hash:!0,onMoveEnd:e=>{M(void 0);const{longitude:t,latitude:n,zoom:r,bearing:a}=e.viewState;k([t,n,r,null!=a?a:0])},onClick:e=>{if(null!=e.features)for(let t of e.features){if("station-label"===t.properties.type){null!=t.properties.url&&"null"!==t.properties.url&&(window.parent.location.href=t.properties.url);break}if("region-label"===t.properties.type){M(JSON.parse(t.properties.target));break}}},onMouseEnter:e=>{var t,n;const r=null===(n=null===(t=S.current)||void 0===t?void 0:t.getMap())||void 0===n?void 0:n.getCanvas();if(null!=r&&(r.style.cursor="pointer",e.features.length>0)){const t=e.features[0];null!=t.properties.url&&"Point"===t.geometry.type&&F(t.geometry.coordinates)}},onMouseLeave:e=>{var t,n;const r=null===(n=null===(t=S.current)||void 0===t?void 0:t.getMap())||void 0===n?void 0:n.getCanvas();null!=r&&(r.style.cursor="",F(null))},ref:S,initialViewState:_,attributionControl:!1,maxPitch:85,interactiveLayerIds:q},l.default.createElement(s.AttributionControl,{compact:r[0]<=600,position:"bottom-right",customAttribution:`Updated on ${new Date(1659815192655).toLocaleDateString()}`}),l.default.createElement(s.NavigationControl,{showCompass:!0,showZoom:!0,position:"bottom-right"}),l.default.createElement(t.LabelProviderContext.Provider,{value:{labelStyle:T}},Object.values(e.lines).filter((e=>null!=e.icon)).map((e=>l.default.createElement(f.MapIcon,{style:L,width:16,height:16,id:e.id,key:e.id,url:`icons/${e.icon}`}))),l.default.createElement(f.MapIcon,{style:L,width:24,height:24,id:"label-background",url:p.default}),l.default.createElement(s.Layer,{id:"sky",type:"sky",paint:{"sky-atmosphere-sun":j?[0,95]:[0,0]}}),w&&l.default.createElement(s.Layer,{id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":j?"#212121":"#FFFFFF","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}}),l.default.createElement(u.Lines,{data:e.features,showLineLabels:E,filterList:y(x,Object.values(e.lines))})),l.default.createElement(s.Source,{id:"regions",type:"geojson",data:v},l.default.createElement(s.Layer,{id:"regions-labels",type:"symbol",layout:{"text-field":["get","name"],"text-size":20},paint:{"text-color":j?"#FFFFFF":"#121212","text-halo-color":j?"#121212":"#FFFFFF","text-halo-width":2},maxzoom:9})),C&&l.default.createElement(s.Popup,{longitude:C[0],latitude:C[1],closeButton:!1,anchor:"top-left",offset:4,className:"mapbox-popup"},"View Station Profile"))}},1879:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SearchBar=void 0;const l=n(2396),s=n(3334),u=i(n(5677)),c=o(n(5571)),f=n(5356),d=n(149),p=o(n(7705)),m=o(n(5664)),h=n(8914),b=n(7975),g=n(9107),y=n(6543),v=c.default.div`
  position: fixed;
  padding: ${({theme:e})=>e.spacing(1)};
  width: 400px;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;

  @media (max-width: 600px) {
    width: 100%;
  }
`,w=(0,c.default)(s.Paper)`
  padding: ${({theme:e,$expanded:t})=>e.spacing(.25)};
  width: ${e=>e.$expanded?"100%":"48px"};
  transition: ${({theme:e})=>e.transitions.create(["width","padding"])};
  overflow: clip;
  display: flex;
  box-sizing: border-box;
`,_=(0,c.default)(s.InputBase)`
  flex-grow: 1;
  margin-left: ${({theme:e})=>e.spacing(.25)};
  & input:placeholder-shown {
    text-overflow: ellipsis;
  }
`,E=(0,c.default)(s.IconButton)`
  padding: 10px;
`,x=(0,c.default)(s.Paper)`
  width: 100%;
  margin-top: ${({theme:e})=>e.spacing(1)};
`,k=c.default.img`
  height: 24px;
  width: 24px;
`,S=(0,c.default)(s.ListItemIcon)`
  justify-content: end;
`,O=(0,c.default)(s.ListItem)`
  user-select: none;
`,M=e=>{const{lines:t}=(0,d.useData2)();return u.default.createElement(s.ListItem,{disablePadding:!0,dense:!0},u.default.createElement(s.ListItemButton,{onClick:()=>e.onClick(e)},u.default.createElement(s.ListItemIcon,null,u.default.createElement(l.LocationOn,null)),u.default.createElement(s.ListItemText,{primary:e.name,secondary:e.description}),u.default.createElement(S,null,e.lines.filter((e=>t[e])).map((e=>u.default.createElement(k,{key:e,src:`icons/${t[e].icon}`}))))))},j=e=>{const{lines:t}=(0,d.useData2)();return u.default.createElement(s.ListItem,{disablePadding:!0,dense:!0},u.default.createElement(s.ListItemButton,{onClick:()=>e.onClick(e)},u.default.createElement(s.ListItemIcon,null,"rail-yard"===e.type?u.default.createElement(l.Build,null):u.default.createElement(l.Train,null)),u.default.createElement(s.ListItemText,{primary:e.name,secondary:e.description}),t[e.id].icon&&u.default.createElement(S,null,u.default.createElement(k,{src:`icons/${t[e.id].icon}`}))))},L=e=>{const{searchOpen:t,setSearchOpen:n}=(0,b.useAppState)();return u.default.createElement(w,{$expanded:t},u.default.createElement(E,{"aria-label":"Search Button",onClick:()=>n(!t)},u.default.createElement(l.Search,null)),u.default.createElement(_,{onChange:t=>{e.onQueryUpdate(t.target.value)},value:e.query,placeholder:"Search stations, lines, yards..."}),t&&u.default.createElement(E,{"aria-label":"Close Search",onClick:()=>{e.onQueryUpdate(""),n(!1)}},u.default.createElement(l.Close,null)))},P=e=>{const{searchOpen:t,setSearchOpen:n}=(0,b.useAppState)();return u.default.createElement(w,{$expanded:!0},u.default.createElement(E,{"aria-label":"Search Button"},u.default.createElement(l.Search,null)),u.default.createElement(_,{onChange:t=>{e.onQueryUpdate(t.target.value)},value:e.query,placeholder:"Search stations, lines, yards..."}),t&&u.default.createElement(E,{"aria-label":"Close Search",onClick:()=>{e.onQueryUpdate(""),n(!1)}},u.default.createElement(l.Close,null)))};t.SearchBar=()=>{const[e,t]=(0,u.useState)(""),{db:n,lines:r}=(0,d.useData2)(),[a,i]=(0,u.useState)([]),{searchOpen:o,setSearchOpen:c}=(0,b.useAppState)(),[w]=(0,y.useWindow)(),{lineFilterState:_,setLineFiltered:E}=(0,b.useAppState)(),{setTarget:k}=(0,h.useMapTarget)(),S=e=>{const t=r[e.parent].filterKey;t&&!(0,g.isLineEnabled)(t,_)&&E(t,!0);const n={type:"Point",coordinates:[e.lng,e.lat]},a=(0,p.default)(n,.5,{units:"kilometers"}),i=(0,m.default)(a);k(i),w<=600&&c(!1)},T=e=>{const t=r[e.id].filterKey;t&&!(0,g.isLineEnabled)(t,_)&&E(t,!0),k(e.bounds),w<=600&&c(!1)};return(0,u.useEffect)((()=>{""!=e&&(0,f.search)(n,e).then((e=>{e.length>0&&c(!0),i(e)}))}),[e]),u.default.createElement(v,null,w>600?u.default.createElement(P,{query:e,onQueryUpdate:t}):u.default.createElement(L,{query:e,onQueryUpdate:t}),u.default.createElement(s.Grow,{in:o,style:{transformOrigin:"50% 0 0"},unmountOnExit:!0},u.default.createElement(x,null,u.default.createElement(s.List,null,0===a.length&&u.default.createElement(O,{disabled:!0},u.default.createElement(s.ListItemIcon,null,u.default.createElement(l.FilterList,null)),u.default.createElement(s.ListItemText,{primary:"No results..."})),a.slice(0,10).map(((e,t)=>"station"===e.type?u.default.createElement(M,{key:t,...e,onClick:S}):u.default.createElement(j,{key:t,...e,onClick:T})))))))}},37:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Controls=void 0;const l=i(n(5677)),s=n(3334),u=n(2396),c=n(8143),f=o(n(5571)),d=n(6707),p=n(8914),m=n(7975),h=o(n(9099)),b=n(6543),g=f.default.div`
  position: fixed;
  right: ${({theme:e,hidden:t})=>t?e.spacing(-8):e.spacing(1)};
  top: ${({theme:e})=>e.spacing(1)};
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transition: ${({theme:e})=>e.transitions.create("right")};
  z-index: 500;
`,y=(0,f.default)(s.Paper)`
  margin: ${({theme:e})=>e.spacing(.5)} 0;

  &:first-child {
    margin-top: 0;
  }

  &:last-child {
    margin-bottom: 0;
  }
`,v=e=>{const{setTarget:t}=(0,p.useMapTarget)();return l.default.createElement(s.Menu,{anchorEl:e.anchorEl,open:e.open,onClose:e.onClose},l.default.createElement(s.MenuItem,{disabled:!0},"Jump toâ€¦"),d.config.regions.map((n=>l.default.createElement(s.MenuItem,{key:n.title,onClick:()=>{var r;r=n,e.onClose(),t(r.bbox)}},n.title))))};t.Controls=()=>{const[e,t]=(0,l.useState)(null),n=l.default.useRef(null),{setLegendDrawerOpen:r,setSettingsDrawerOpen:a,setShareSheetOpen:i,searchOpen:o}=(0,m.useAppState)(),[f]=(0,b.useWindow)(),d=l.default.useRef(null),p=l.default.useRef(null);return(0,l.useEffect)((()=>{if(!localStorage.quickNav){const e=()=>{(()=>{const e=p.current.getBoundingClientRect();d.current.start({clientX:e.left+e.width/2,clientY:e.top+e.height/2},{center:!1}),setTimeout((()=>d.current.stop({})),320)})(),localStorage.quickNav||(n.current=window.setTimeout(e,2e3))};e()}}),[]),l.default.createElement(l.default.Fragment,null,l.default.createElement(g,{hidden:!(f>600)&&o},l.default.createElement(y,null,l.default.createElement(s.Tooltip,{title:"Quick Navigation"},l.default.createElement(s.IconButton,{ref:p,onClick:e=>{localStorage.quickNav=!0,n.current&&clearTimeout(n.current),t(e.currentTarget)},size:"large"},l.default.createElement(h.default,{ref:d,center:!0}),l.default.createElement(u.NearMe,null)))),l.default.createElement(y,null,l.default.createElement(s.Tooltip,{title:"Map Legend"},l.default.createElement(s.IconButton,{onClick:()=>r(!0),size:"large"},l.default.createElement(u.Layers,null)))),l.default.createElement(y,null,l.default.createElement(s.Tooltip,{title:"Map Settings"},l.default.createElement(s.IconButton,{onClick:()=>a(!0),size:"large"},l.default.createElement(u.Settings,null)))),l.default.createElement(y,null,l.default.createElement(s.Tooltip,{title:"Share"},l.default.createElement(s.IconButton,{onClick:()=>i(!0),size:"large"},l.default.createElement(u.Share,null))),l.default.createElement(s.Divider,null),l.default.createElement(s.Tooltip,{title:"Contribute on GitHub"},l.default.createElement(s.IconButton,{href:"https://github.com/RailFansCanada/RailFansMap",size:"large"},l.default.createElement(u.GitHub,null))))),l.default.createElement(c.ShareSheet,null),l.default.createElement(v,{anchorEl:e,open:Boolean(e),onClose:()=>{t(null)}}))}},6786:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayerOption=void 0;const a=r(n(5677)),i=n(3334),o=r(n(5571)),l=(0,o.default)(i.Typography)`
  margin-bottom: ${({theme:e})=>e.spacing(1)};
`,s=(0,o.default)(i.CardContent)`
  display: flex;
  flex-direction: column;
  flex-grow: 1;
`,u=(0,o.default)(i.Card)`
  margin: ${({theme:e})=>e.spacing(2)};
  border-radius: 8px;
  ${({selected:e,tint:t})=>e&&`background-color:${(0,i.alpha)(t,.1)};`}
`,c=(0,o.default)(i.CardActionArea)`
  display: flex;
  flex-direction: row;
  justify-content: start;
`,f=o.default.div`
  display: flex;
  flex-grow: 0;
  flex-shrink: 0;
  width: 88px;
  height: 88px;
  margin: ${({theme:e})=>e.spacing(1)};
  border-radius: 100%;
  overflow: hidden;
  background: ${({theme:e})=>e.palette.background.default};
  filter: ${({selected:e})=>e?"grayscale(0)":"grayscale(1)"};
  transition: ${({theme:e})=>e.transitions.create("filter")};
  & img {
    width: 100%;
    height: 100%;
  }
  border: 1px solid ${({theme:e})=>e.palette.text.disabled};
`;t.LayerOption=e=>{var t;const n=(0,i.useTheme)();return a.default.createElement(u,{variant:"outlined",selected:e.selected,tint:null!==(t=e.tint)&&void 0!==t?t:n.palette.secondary.main},a.default.createElement(c,{onClick:()=>{var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}},e.imageUrl&&a.default.createElement(f,{selected:e.selected},a.default.createElement("img",{src:e.imageUrl})),a.default.createElement(s,null,a.default.createElement(l,{variant:"h6"},e.primary),a.default.createElement(i.Typography,{variant:"body1"},e.secondary))))}},8719:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LegendDrawer=void 0;const l=i(n(5677)),s=n(3334),u=o(n(5571)),c=n(3895),f=n(4173),d=n(8914),p=n(7975),m=n(6543),h=n(9107),b=u.default.div`
  width: 5px;
  background-color: ${e=>e.tint};
  display: flex;
  align-self: stretch;
  margin: ${({theme:e})=>e.spacing(1)};
`,g=(0,u.default)(s.ListItem)`
  filter: ${({checked:e})=>e?"grayscale(0)":"grayscale(1)"};
  transition: ${({theme:e})=>e.transitions.create("filter")};

  & .Mui-disabled {
    opacity: 1;
  }
`,y=e=>{const{setTarget:t}=(0,d.useMapTarget)(),[n]=(0,m.useWindow)(),r=(0,s.useTheme)(),{setLegendDrawerOpen:a}=(0,p.useAppState)();return l.default.createElement(g,{disablePadding:!0,dense:!0,checked:e.enabled,secondaryAction:e.filterKey&&!e.filterKey.startsWith("!")&&l.default.createElement(s.Checkbox,{style:{color:e.tint},checked:e.enabled,onChange:e.onChecked,edge:"end"})},l.default.createElement(s.ListItemButton,{disabled:!e.enabled,onClick:()=>{null!=e.bbox&&t(e.bbox),n<=r.breakpoints.values.md&&a(!1)}},e.icon&&l.default.createElement(s.ListItemAvatar,null,l.default.createElement("img",{src:e.icon})),l.default.createElement(b,{tint:e.tint}),l.default.createElement(s.ListItemText,{primary:e.title,secondary:e.description})))},v=u.default.div`
  width: 100%;
  box-sizing: border-box;
  overflow-x: hidden;
`,w=(0,u.default)(s.ListItemButton)`
  width: 100%;
  display: flex;
  box-sizing: border-box;
  justify-content: space-between;
  align-items: center;
  padding: ${({theme:e})=>e.spacing(2)};
`,_=e=>{var t;const n=(0,s.useTheme)(),{lineFilterState:r,setLineFiltered:a,legendGroupState:i,setLegendGroupOpen:o}=(0,p.useAppState)(),u=(0,l.useRef)(null),c=null!==(t=i[e.agency.id])&&void 0!==t&&t;return l.default.createElement(v,{ref:u},l.default.createElement(w,{onClick:()=>{o(e.agency.id,!c),c||setTimeout((()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}),300)}},l.default.createElement(s.Typography,{variant:"subtitle1"},e.agency.name),l.default.createElement("div",null,l.default.createElement(f.Chevron,{down:c,color:n.palette.text.primary}))),l.default.createElement(s.Collapse,{in:c},e.entries.map((e=>{const t=(0,h.isLineEnabled)(e.filterKey,r);return l.default.createElement(y,{key:e.id,...e,enabled:t,onChecked:()=>{a(e.filterKey,!t)}})}))),l.default.createElement(s.Divider,null))};t.LegendDrawer=e=>{const{legendDrawerOpen:t,setLegendDrawerOpen:n}=(0,p.useAppState)(),r={};return Object.values(e.lines).forEach((e=>{const t=e.agency;null==r[t]&&(r[t]=[]),r[t].push(e)})),l.default.createElement(c.MenuDrawer,{open:t,onClose:()=>n(!1),title:"Map Legend"},l.default.createElement(s.List,null,Object.entries(r).map((([t,n])=>{const r=n.filter((e=>"rail-line"===(null==e?void 0:e.type)||"streetcar-line"===(null==e?void 0:e.type))).map((e=>({id:e.id,title:e.name,description:e.description,tint:e.color,bbox:e.bbox,icon:`icons/${e.icon}`,filterKey:e.filterKey})));return l.default.createElement(_,{agency:e.allAgencies[t],key:t,entries:r})}))))}},5151:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuOption=t.SwitchOption=void 0;const a=r(n(5677)),i=n(3334);t.SwitchOption=e=>{const t=()=>{e.onToggle(!e.checked)};return a.default.createElement(i.ListItem,{disabled:e.disabled,onClick:t,button:!0},a.default.createElement(i.ListItemText,{primary:e.primary,secondary:e.secondary}),a.default.createElement(i.ListItemSecondaryAction,null,a.default.createElement(i.Switch,{disabled:e.disabled,onChange:t,checked:e.checked,edge:"end"})))},t.MenuOption=e=>{const[t,n]=a.default.useState(null);return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.ListItem,{onClick:e=>{n(e.currentTarget)},button:!0},a.default.createElement(i.ListItemText,{primary:e.primary,secondary:e.options[e.value]})),a.default.createElement(i.Menu,{open:null!=t,anchorEl:t},e.options.map(((t,r)=>a.default.createElement(i.MenuItem,{key:t,onClick:()=>(t=>{null==e||e.onChange(t),n(null)})(r),selected:e.value===r},t)))))}},3895:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuDrawer=void 0;const a=r(n(5677)),i=n(3334),o=r(n(5571)),l=n(2396),s=r(n(1462)),u=(0,o.default)(i.Drawer)`
  & .MuiDrawer-paper {
    width: 420px;
    ${({theme:e})=>e.breakpoints.down("md")} {
      width: 100%;
    }
    box-shadow: ${({theme:e})=>e.shadows[4]};
  }
`,c=(0,o.default)(i.AppBar)`
  background-color: ${({theme:e})=>e.palette.background.default};
  display: flex;
  flex-grow: 0;
`,f=(0,o.default)(i.IconButton)`
  margin-right: ${({theme:e})=>e.spacing(2)};
`,d=(0,o.default)(i.Typography)`
  flex-grow: 1;
  color: ${({theme:e})=>e.palette.text.primary};
`,p=o.default.div`
  display: flex;
  flex-grow: 1;
  height: 100%;
`;t.MenuDrawer=e=>a.default.createElement(u,{variant:"persistent",anchor:"right",open:e.open,elevation:4},a.default.createElement(c,{position:"static"},a.default.createElement(i.Toolbar,null,a.default.createElement(f,{edge:"start",size:"large",onClick:e.onClose},a.default.createElement(l.Close,null)),a.default.createElement(d,{variant:"h6"},e.title))),a.default.createElement(p,null,a.default.createElement(s.default,null,e.children)))},1090:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsDrawer=void 0;const a=r(n(5677)),i=n(3334),o=n(6786),l=n(5151),s=n(3895),u=n(7975),c=r(n(5571)),f=["Follow System Settings","Light","Dark"],d=e=>"system"===e?0:"light"===e?1:2,p=(0,c.default)(i.Typography)`
  width: 100%;
  padding: ${({theme:e})=>e.spacing(0,2)};
  margin: ${({theme:e})=>e.spacing(2,0,0,0)};
  box-sizing: border-box;
  display: block;
`;t.SettingsDrawer=()=>{const{settingsDrawerOpen:e,setSettingsDrawerOpen:t,show3DBuildings:n,setShow3DBuildings:r,showLabels:c,setShowLabels:m,mapStyle:h,setMapStyle:b,appTheme:g,setAppTheme:y}=(0,u.useAppState)();return a.default.createElement(s.MenuDrawer,{open:e,onClose:()=>{t(!1)},title:"Map Settings"},a.default.createElement(p,{variant:"overline"},"Basemap"),a.default.createElement(o.LayerOption,{primary:"Vector Basemap",secondary:"Basic vector basemap in either light or dark themes",selected:"vector"===h,onClick:()=>b("vector")}),a.default.createElement(o.LayerOption,{primary:"Satellite Basemap",secondary:"Satellite imagery",selected:"satellite"===h,onClick:()=>b("satellite")}),a.default.createElement(i.Divider,null),a.default.createElement(p,{variant:"overline"},"Other Settings"),a.default.createElement(i.List,null,a.default.createElement(l.SwitchOption,{primary:"Show 3D buildings",checked:n,onToggle:e=>r(e)}),a.default.createElement(l.SwitchOption,{primary:"Show station labels",checked:c,onToggle:e=>m(e)}),a.default.createElement(l.MenuOption,{primary:"Choose Theme",options:f,value:d(g),onChange:e=>{switch(e){case 0:y("system");break;case 1:y("light");break;case 2:y("dark")}}})),a.default.createElement(i.Divider,null),a.default.createElement(p,{variant:"overline"},"About"),a.default.createElement(i.List,null,a.default.createElement(i.ListItemButton,{href:"https://www.iubenda.com/privacy-policy/15954265"},a.default.createElement(i.ListItemText,{primary:"Privacy Policy"})),a.default.createElement(i.ListItem,{dense:!0},a.default.createElement(i.ListItemText,{primary:"Version",secondary:"3.4.2"})),a.default.createElement(i.ListItem,{dense:!0},a.default.createElement(i.ListItemText,{primary:"Built at",secondary:new Date(1659815192655).toLocaleString()}))))}},8143:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShareSheet=void 0;const a=n(3334),i=r(n(2263)),o=n(2396),l=r(n(5677)),s=n(7975),u=(0,i.default)((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},shareButton:{textTransform:"none",fontSize:e.typography.body1.fontSize,background:e.palette.background.default,"&:hover":{background:e.palette.background.default},margin:e.spacing(0,3,2,3),maxWidth:"100%"},dialogContent:{listStyle:"none",display:"flex",flexDirection:"column",padding:e.spacing(1,0)},buttonText:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}))),c=(0,i.default)((e=>({root:{color:e.palette.text.primary}}))),f=e=>{const t=c(),n=()=>{e.onCheck(!e.checked)};return l.default.createElement(a.ListItem,{button:!0,onClick:n,dense:!0},l.default.createElement(a.ListItemText,{primary:e.primary,secondary:e.secondary}),l.default.createElement(a.ListItemSecondaryAction,null,l.default.createElement(a.Checkbox,{color:"primary",className:t.root,checked:e.checked,edge:"start",onChange:n})))};t.ShareSheet=()=>{const{shareSheetOpen:e,setShareSheetOpen:t,lineFilterState:n,appTheme:r,mapStyle:i}=(0,s.useAppState)(),c=u(),[d,p]=l.default.useState(null),[m,h]=l.default.useState(!0),[b,g]=l.default.useState(!1),[y,v]=l.default.useState(!1),w=()=>{t(!1)},_=()=>{const e=location.protocol,t=location.host,r=new URL(`${e}//${t}/`);if(m&&(r.hash=location.hash),b&&r.searchParams.append("map","satellite"),y){const e=Object.keys(n).filter((e=>n[e])).map((e=>e)).join(",");r.searchParams.append("show",e)}return r.toString()};return l.default.createElement(l.default.Fragment,null,l.default.createElement(a.Dialog,{fullWidth:!0,maxWidth:"sm",onClose:w,open:e},l.default.createElement(a.DialogTitle,null,l.default.createElement(a.Typography,{variant:"h6"},"Share This Map"),l.default.createElement(a.IconButton,{className:c.closeButton,onClick:w,size:"large"},l.default.createElement(o.Close,null))),l.default.createElement(a.DialogContent,{className:c.dialogContent},l.default.createElement(a.Button,{className:c.shareButton,onClick:()=>{var e;navigator.share?navigator.share({title:"Rail Fans Map",url:_()}):navigator.clipboard.writeText&&(e=_(),navigator.clipboard.writeText(e).then((()=>{p("Copied to clipboard")})).catch((()=>{p("Could not copy to clipboard")})))},endIcon:l.default.createElement(o.ContentCopy,null)},l.default.createElement("span",{className:c.buttonText},_())),l.default.createElement(f,{primary:"Current Location",secondary:"Share the map with the current location visible",checked:m,onCheck:e=>h(e)}),l.default.createElement(f,{primary:"Satellite Basemap",secondary:"Share the map using the satellite basemap",checked:b,onCheck:e=>g(e)}),l.default.createElement(f,{primary:"Include Toggled Lines",secondary:"Show all lines that have been toggled in the legend",checked:y,onCheck:e=>v(e)}))),l.default.createElement(a.Snackbar,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:null!=d,onClose:()=>p(null),message:d,autoHideDuration:2400}))}},6707:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const a=r(n(9455));t.config=a.default},7975:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useAppState=t.ProvideAppState=void 0;const l=o(n(6450)),s=i(n(5677)),u=(0,s.createContext)(null),c=(()=>{if(null==localStorage.settings)return{};const e=JSON.parse(localStorage.settings);if(null==e.version){const{showLineLabels:t,...n}=e;return{...n,showLabels:t}}return e.version<"3.4.2"?{...e,showLabels:!0}:e})(),f=(()=>{const e=new URLSearchParams(location.search);return(0,l.default)({},(t=>{var n,r,a,i;if((null===(n=e.get("map"))||void 0===n?void 0:n.includes("satellite"))?t.mapStyle="satellite":(null===(r=e.get("map"))||void 0===r?void 0:r.includes("vector"))&&(t.mapStyle="vector"),(null===(a=e.get("theme"))||void 0===a?void 0:a.includes("light"))?t.appTheme="light":(null===(i=e.get("theme"))||void 0===i?void 0:i.includes("dark"))&&(t.appTheme="dark"),e.get("show")){const n=e.get("show").split(",");t.lineFilterState={},n.forEach((e=>{t.lineFilterState[e]=!0}))}}))})(),d={...c,...f,lineFilterState:{...c.lineFilterState,...f.lineFilterState}};t.ProvideAppState=e=>{const t=(()=>{var e,t,n,r,a,i;const[o,l]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null!==(e=d.show3DBuildings)&&void 0!==e&&e),[y,v]=(0,s.useState)(null===(t=d.showLabels)||void 0===t||t),[w,_]=(0,s.useState)(null!==(n=d.appTheme)&&void 0!==n?n:"system"),[E,x]=(0,s.useState)(null!==(r=d.mapStyle)&&void 0!==r?r:"vector"),[k,S]=(0,s.useState)(d.lastLocation),[O,M]=(0,s.useState)(null!==(a=d.lineFilterState)&&void 0!==a?a:{}),[j,L]=(0,s.useState)(null!==(i=d.legendGroupState)&&void 0!==i?i:{}),P={settingsDrawerOpen:o,setSettingsDrawerOpen:l,legendDrawerOpen:u,setLegendDrawerOpen:c,shareSheetOpen:f,setShareSheetOpen:p,searchOpen:m,setSearchOpen:h,show3DBuildings:b,setShow3DBuildings:g,showLabels:y,setShowLabels:v,appTheme:w,setAppTheme:_,mapStyle:E,setMapStyle:x,lineFilterState:O,setLineFiltered:(e,t)=>{M({...O,[e]:t})},legendGroupState:j,setLegendGroupOpen:(e,t)=>{L({...j,[e]:t})},lastLocation:k,setLastLocation:S};return(0,s.useEffect)((()=>{(e=>{const{settingsDrawerOpen:t,legendDrawerOpen:n,shareSheetOpen:r,...a}=e;localStorage.settings=JSON.stringify({...a,version:"3.4.2"})})(P)})),P})();return s.default.createElement(u.Provider,{value:t},e.children)},t.useAppState=()=>(0,s.useContext)(u)},149:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useData2=t.ProvideData2=void 0;const o=i(n(5677)),l=n(6707),s=n(5356),u=o.default.createContext({features:null,agencies:{},regions:{},lines:{},db:null});t.ProvideData2=e=>{const t=(()=>{const e={};l.config.agencies.forEach((t=>{e[t.id]=t}));const t={};l.config.regions.forEach((e=>{t[e.id]=e}));const[n,r]=(0,o.useState)({features:null,db:null,agencies:e,regions:t,lines:{}});return(0,o.useEffect)((()=>{(async()=>{const e=await(0,s.prepDatabase)(),t=await(async()=>{const e=l.config.regions.flatMap((e=>e.agencies.flatMap((t=>{const n=l.config.agencies.find((e=>e.id===t));if(null==n)throw`Agency wasn't found: ${t}`;return n.data.map((t=>(async e=>{const t=await fetch(`data/${e}`);if(!t.ok)throw`Could not load ${e}`;return await t.json()})(t).then((t=>((e,t,n)=>{const r=n.features.map((r=>(r.properties={...r.properties,region:e.id,agency:t.id,filterKey:n.metadata.filterKey,parent:n.metadata.id,class:n.metadata.type,color:n.metadata.color,offset:n.metadata.offset},r))),a={...n.metadata,agency:t.id,region:e.id,bbox:n.bbox};return{...n,metadata:a,features:r}})(e,n,t)))))}))));return await Promise.all(e)})(),a={type:"FeatureCollection",features:t.flatMap((e=>e.features))},i={};t.forEach((e=>{i[e.metadata.id]=e.metadata})),await(0,s.processFeatures)(e,a,n.agencies,n.regions),await(0,s.processBounds)(e,Object.values(i),n.agencies,n.regions),r((t=>({...t,features:a,lines:i,db:e})))})()}),[]),n})();return o.default.createElement(u.Provider,{value:t},e.children)},t.useData2=()=>(0,o.useContext)(u)},8914:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useMapTarget=t.ProvideMapTarget=void 0;const o=i(n(5677)),l=o.default.createContext(null);t.ProvideMapTarget=e=>{const t=(()=>{const[e,t]=(0,o.useState)();return{target:e,setTarget:e=>{t(e)}}})();return o.default.createElement(l.Provider,{value:t},e.children)},t.useMapTarget=()=>(0,o.useContext)(l)},6543:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useWindow=t.ProvideWindow=void 0;const o=i(n(5677)),l=o.default.createContext([0,0]);t.ProvideWindow=e=>{const t=(()=>{const[e,t]=(0,o.useState)([window.innerWidth,window.innerHeight]);return(0,o.useEffect)((()=>{window.addEventListener("resize",(()=>{t([window.innerWidth,window.innerHeight])}))}),[]),e})();return o.default.createElement(l.Provider,{value:t},e.children)},t.useWindow=()=>(0,o.useContext)(l)},3008:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(1168);const a=r(n(5677)),i=n(3295),o=n(5571),l=n(2269),s=o.createGlobalStyle`
  html,
  body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  #content {
    height: 100%;
  }

  ::selection {
    background: #f44336;
  }

  .mapboxgl-popup-content {
    margin-left: -16px;
    border-radius: 4px !important;
    background: #212121 !important;
    color: #ffffff;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif !important;
    padding: 8px !important;
    font-size: 16px;
    margin-top: 12px;
  }

  .mapboxgl-popup-tip {
    display: none;
  }
`,u=document.getElementById("content");(0,i.createRoot)(u).render(a.default.createElement(a.default.StrictMode,null,a.default.createElement(s,null),a.default.createElement(l.App,null)))},9824:()=>{},2219:()=>{},8183:()=>{},9455:e=>{"use strict";e.exports=JSON.parse('{"agencies":[{"id":"grt","name":"GRT","bbox":[-80.545261,43.419397,-80.44124409556389,43.501633],"data":["waterloo/ion.json","waterloo/ionOMSF.json"]},{"id":"oc-transpo","name":"OC Transpo","bbox":[-75.93239095708121,45.26587692566606,-75.47978870927166,45.49642647588418],"data":["ottawa/belfastYard.json","ottawa/greenbankYard.json","ottawa/moodieYard.json","ottawa/walkleyYard.json","ottawa/line1.json","ottawa/line2.json","ottawa/line3.json","ottawa/line4.json","ottawa/stage3barrhaven.json","ottawa/stage3kanata.json"]},{"id":"rtc","name":"RTC","bbox":[-71.353707,46.760213,-71.211037,46.846826],"data":["quebec/tramway.json"]},{"id":"sto","name":"STO","bbox":[-75.86578535776559,45.39536917415158,-75.69585303512089,45.43724924103122],"data":["gatineau/a.json","gatineau/b.json"]},{"id":"ttc","name":"TTC","bbox":[-79.60331150195182,43.63443706290249,-79.2443698561092,43.857232769665806],"data":["toronto/davisvilleYard.json","toronto/wilsonYard.json","toronto/greenwoodYard.json","toronto/keeleYard.json","toronto/mccowanYard.json","toronto/eglintonMSF.json","toronto/finchMSF.json","toronto/sheppardWye.json","toronto/bloorYongeConnectors.json","toronto/ontarioLineMSF.json","toronto/ynseTSF.json","toronto/line1.json","toronto/line2.json","toronto/line3.json","toronto/line4.json","toronto/line5.json","toronto/line6.json","toronto/line5west.json","toronto/sse.json","toronto/ontarioLine.json","toronto/ynse.json"]},{"id":"ttcStreetcar","name":"TTC - Streetcar","bbox":[-79.544722,43.591514,-79.281164,43.689348391718475],"data":["toronto/streetcar/hillcrestComplex.json","toronto/streetcar/leslieBarns.json","toronto/streetcar/roncesvallesCarhouse.json","toronto/streetcar/russellCarhouse.json","toronto/streetcar/streetcarLoops.json","toronto/streetcar/streetcarConnectors.json","toronto/streetcar/route501.json","toronto/streetcar/route503.json","toronto/streetcar/route504.json","toronto/streetcar/route505.json","toronto/streetcar/route506.json","toronto/streetcar/route509.json","toronto/streetcar/route510.json","toronto/streetcar/route511.json","toronto/streetcar/route512.json"]},{"id":"go","name":"GO","bbox":[-81.2493479999999,42.98024840000009,-78.885068,44.3737523],"data":["go/br.json","go/ki.json","go/le.json","go/lw.json","go/mi.json","go/rh.json","go/st.json","go/up.json"]},{"id":"stm","name":"STM","bbox":[-73.7260800545552,45.44372029100138,-73.52186189872911,45.59972319599818],"data":["montreal/green.json","montreal/orange.json","montreal/blue.json","montreal/yellow.json","montreal/blueExtension.json"]},{"id":"rem","name":"REM","bbox":[-73.9144974,45.4305912,-73.425561,45.67481794612502],"data":["montreal/rem.json"]}],"regions":[{"id":"waterloo","title":"Kitchener-Waterloo","agencies":["grt"],"location":[-80.5,43.466667],"bbox":[-80.545261,43.419397,-80.44124409556389,43.501633]},{"id":"quebec","title":"QuÃ©bec City","agencies":["rtc"],"location":[-71.235223,46.82596],"bbox":[-71.353707,46.760213,-71.211037,46.846826]},{"id":"ottawa-gatineau","title":"Ottawa-Gatineau","agencies":["oc-transpo","sto"],"location":[-75.691042,45.420472],"bbox":[-75.93239095708121,45.26587692566606,-75.47978870927166,45.49642647588418]},{"id":"toronto","title":"Toronto","agencies":["ttc","ttcStreetcar"],"location":[-79.383849,43.653482],"bbox":[-79.60331150195182,43.591514,-79.2443698561092,43.857232769665806]},{"id":"montreal","title":"MontrÃ©al","agencies":["rem","stm"],"location":[-73.59991,45.49535],"bbox":[-73.9144974,45.4305912,-73.425561,45.59972319599818]}]}')}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=i,e=[],l.O=(t,n,r,a)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],o=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(l.O).every((e=>l.O[e](n[s])))?n.splice(s--,1):(o=!1,a<i&&(i=a));if(o){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);l.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,l.d(a,i),a},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="otrainmap:",l.l=(e,t,n,i)=>{if(r[e])r[e].push(t);else{var o,s;if(void 0!==n)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var f=u[c];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==a+n){o=f;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.setAttribute("data-webpack",a+n),o.src=e),r[e]=[t];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var a=r[e];if(delete r[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),s&&document.head.appendChild(o)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={179:0};l.f.j=(t,n)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var i=l.p+l.u(t),o=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}}),"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,o,s]=n,u=0;if(i.some((t=>0!==e[t]))){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(s)var c=s(l)}for(t&&t(n);u<i.length;u++)a=i[u],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(c)},n=self.webpackChunkotrainmap=self.webpackChunkotrainmap||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=l.O(void 0,[949],(()=>l(3008)));s=l.O(s)})();